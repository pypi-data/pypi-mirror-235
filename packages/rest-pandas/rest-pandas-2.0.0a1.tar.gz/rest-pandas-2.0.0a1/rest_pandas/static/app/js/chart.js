import{modules as e}from"./wq.js";const t={plotly:"https://cdn.plot.ly/plotly-2.26.2.min.js"},{react:n}=e,{Children:o}=n,{Component:r}=n,{Fragment:a}=n,{Profiler:l}=n,{PureComponent:s}=n,{StrictMode:i}=n,{Suspense:u}=n,{__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:c}=n,{cloneElement:f}=n,{createContext:p}=n,{createElement:d}=n,{createFactory:y}=n,{createRef:h}=n,{forwardRef:b}=n,{isValidElement:m}=n,{lazy:v}=n,{memo:g}=n,{startTransition:E}=n,{unstable_act:P}=n,{useCallback:_}=n,{useContext:O}=n,{useDebugValue:x}=n,{useDeferredValue:j}=n,{useEffect:w}=n,{useId:k}=n,{useImperativeHandle:R}=n,{useInsertionEffect:C}=n,{useLayoutEffect:S}=n,{useMemo:z}=n,{useReducer:H}=n,{useRef:L}=n,{useState:T}=n,{useSyncExternalStore:D}=n,{useTransition:U}=n,{version:I}=n;function M(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function N(e){if(e.__esModule)return e;var t=e.default;if("function"==typeof t){var n=function e(){return this instanceof e?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach((function(t){var o=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,o.get?o:{enumerable:!0,get:function(){return e[t]}})})),n}var W={},B=N(Object.freeze({__proto__:null,Children:o,Component:r,Fragment:a,Profiler:l,PureComponent:s,StrictMode:i,Suspense:u,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:c,cloneElement:f,createContext:p,createElement:d,createFactory:y,createRef:h,default:n,forwardRef:b,isValidElement:m,lazy:v,memo:g,startTransition:E,unstable_act:P,useCallback:_,useContext:O,useDebugValue:x,useDeferredValue:j,useEffect:w,useId:k,useImperativeHandle:R,useInsertionEffect:C,useLayoutEffect:S,useMemo:z,useReducer:H,useRef:L,useState:T,useSyncExternalStore:D,useTransition:U,version:I}));const{"prop-types":A}=e,{array:F}=A,{bigint:V}=A,{bool:Y}=A,{func:$}=A,{number:q}=A,{object:G}=A,{string:J}=A,{symbol:K}=A,{any:Q}=A,{arrayOf:X}=A,{element:Z}=A,{elementType:ee}=A,{instanceOf:te}=A,{node:ne}=A,{objectOf:oe}=A,{oneOf:re}=A,{oneOfType:ae}=A,{shape:le}=A,{exact:se}=A,{checkPropTypes:ie}=A,{resetWarningCache:ue}=A;var ce=N(Object.freeze({__proto__:null,any:Q,array:F,arrayOf:X,bigint:V,bool:Y,checkPropTypes:ie,default:A,element:Z,elementType:ee,exact:se,func:$,instanceOf:te,node:ne,number:q,object:G,objectOf:oe,oneOf:re,oneOfType:ae,resetWarningCache:ue,shape:le,string:J,symbol:K}));!function(e){function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e){var n=function(n){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(PlotlyComponent,n);var r,a,d=(r=PlotlyComponent,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=u(r);if(a){var o=u(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return function(e,n){if(n&&("object"===t(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return i(e)}(this,e)});function PlotlyComponent(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,PlotlyComponent),(t=d.call(this,e)).p=Promise.resolve(),t.resizeHandler=null,t.handlers={},t.syncWindowResize=t.syncWindowResize.bind(i(t)),t.syncEventHandlers=t.syncEventHandlers.bind(i(t)),t.attachUpdateEvents=t.attachUpdateEvents.bind(i(t)),t.getRef=t.getRef.bind(i(t)),t.handleUpdate=t.handleUpdate.bind(i(t)),t.figureCallback=t.figureCallback.bind(i(t)),t.updatePlotly=t.updatePlotly.bind(i(t)),t}return function(e,t,n){t&&l(e.prototype,t);n&&l(e,n);Object.defineProperty(e,"prototype",{writable:!1})}(PlotlyComponent,[{key:"updatePlotly",value:function(t,n,o){var r=this;this.p=this.p.then((function(){if(!r.unmounting){if(!r.el)throw new Error("Missing element reference");return e.react(r.el,{data:r.props.data,layout:r.props.layout,config:r.props.config,frames:r.props.frames})}})).then((function(){r.unmounting||(r.syncWindowResize(t),r.syncEventHandlers(),r.figureCallback(n),o&&r.attachUpdateEvents())})).catch((function(e){r.props.onError&&r.props.onError(e)}))}},{key:"componentDidMount",value:function(){this.unmounting=!1,this.updatePlotly(!0,this.props.onInitialized,!0)}},{key:"componentDidUpdate",value:function(e){this.unmounting=!1;var t=e.frames&&e.frames.length?e.frames.length:0,n=this.props.frames&&this.props.frames.length?this.props.frames.length:0,o=!(e.layout===this.props.layout&&e.data===this.props.data&&e.config===this.props.config&&n===t),r=void 0!==e.revision,a=e.revision!==this.props.revision;(o||r&&(!r||a))&&this.updatePlotly(!1,this.props.onUpdate,!1)}},{key:"componentWillUnmount",value:function(){this.unmounting=!0,this.figureCallback(this.props.onPurge),this.resizeHandler&&p&&(window.removeEventListener("resize",this.resizeHandler),this.resizeHandler=null),this.removeUpdateEvents(),e.purge(this.el)}},{key:"attachUpdateEvents",value:function(){var e=this;this.el&&this.el.removeListener&&f.forEach((function(t){e.el.on(t,e.handleUpdate)}))}},{key:"removeUpdateEvents",value:function(){var e=this;this.el&&this.el.removeListener&&f.forEach((function(t){e.el.removeListener(t,e.handleUpdate)}))}},{key:"handleUpdate",value:function(){this.figureCallback(this.props.onUpdate)}},{key:"figureCallback",value:function(e){if("function"==typeof e){var t=this.el;e({data:t.data,layout:t.layout,frames:this.el._transitionData?this.el._transitionData._frames:null},this.el)}}},{key:"syncWindowResize",value:function(t){var n=this;p&&(this.props.useResizeHandler&&!this.resizeHandler?(this.resizeHandler=function(){return e.Plots.resize(n.el)},window.addEventListener("resize",this.resizeHandler),t&&this.resizeHandler()):!this.props.useResizeHandler&&this.resizeHandler&&(window.removeEventListener("resize",this.resizeHandler),this.resizeHandler=null))}},{key:"getRef",value:function(e){this.el=e,this.props.debug&&p&&(window.gd=this.el)}},{key:"syncEventHandlers",value:function(){var e=this;c.forEach((function(t){var n=e.props["on"+t],o=e.handlers[t],r=Boolean(o);n&&!r?e.addEventHandler(t,n):!n&&r?e.removeEventHandler(t):n&&r&&n!==o&&(e.removeEventHandler(t),e.addEventHandler(t,n))}))}},{key:"addEventHandler",value:function(e,t){this.handlers[e]=t,this.el.on(this.getPlotlyEventName(e),this.handlers[e])}},{key:"removeEventHandler",value:function(e){this.el.removeListener(this.getPlotlyEventName(e),this.handlers[e]),delete this.handlers[e]}},{key:"getPlotlyEventName",value:function(e){return"plotly_"+e.toLowerCase()}},{key:"render",value:function(){return o.default.createElement("div",{id:this.props.divId,style:this.props.style,ref:this.getRef,className:this.props.className})}}]),PlotlyComponent}(o.Component);return n.propTypes={data:r.default.arrayOf(r.default.object),config:r.default.object,layout:r.default.object,frames:r.default.arrayOf(r.default.object),revision:r.default.number,onInitialized:r.default.func,onPurge:r.default.func,onError:r.default.func,onUpdate:r.default.func,debug:r.default.bool,style:r.default.object,className:r.default.string,useResizeHandler:r.default.bool,divId:r.default.string},c.forEach((function(e){n.propTypes["on"+e]=r.default.func})),n.defaultProps={debug:!1,useResizeHandler:!1,data:[],style:{position:"relative",display:"inline-block"}},n};var n,o=function(e,n){if(!n&&e&&e.__esModule)return e;if(null===e||"object"!==t(e)&&"function"!=typeof e)return{default:e};var o=a(n);if(o&&o.has(e))return o.get(e);var r={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var i=l?Object.getOwnPropertyDescriptor(e,s):null;i&&(i.get||i.set)?Object.defineProperty(r,s,i):r[s]=e[s]}r.default=e,o&&o.set(e,r);return r}(B),r=(n=ce)&&n.__esModule?n:{default:n};function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(a=function(e){return e?n:t})(e)}function l(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function s(e,t){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},s(e,t)}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}var c=["AfterExport","AfterPlot","Animated","AnimatingFrame","AnimationInterrupted","AutoSize","BeforeExport","BeforeHover","ButtonClicked","Click","ClickAnnotation","Deselect","DoubleClick","Framework","Hover","LegendClick","LegendDoubleClick","Relayout","Relayouting","Restyle","Redraw","Selected","Selecting","SliderChange","SliderEnd","SliderStart","SunburstClick","Transitioning","TransitionInterrupted","Unhover","WebGlContextLost"],f=["plotly_restyle","plotly_redraw","plotly_relayout","plotly_relayouting","plotly_doubleclick","plotly_animated","plotly_sunburstclick"],p="undefined"!=typeof window}(W);var fe=M(W);const pe={},de={autosize:!0};function usePlotly(){const[e,n]=T((()=>pe.current));return w((()=>{pe.current||async function(){try{await import(t.plotly);const e=fe(window.Plotly);pe.current=e,n((()=>e))}catch{n((()=>ErrorPlot))}}()})),e||LoadingPlot}function LoadingPlot(){return"Loading..."}function ErrorPlot(){return"Error loading Plotly."}function usePlotLayout({type:e,x:t,y:n,layout:o}){return z((()=>({...de,boxmode:"box"===e?"group":null,...o,xaxis:{title:t,...(o||{}).xaxis},yaxis:{title:n,...(o||{}).yaxis}})),[e,t,n,o])}function usePlotData({type:e,mode:t,datasets:n,x:o,y:r,label:a,group:l}){return z((()=>(n||[]).map((n=>{const s={type:e,mode:t,name:me(n),x:[],y:[],text:[]};for(const t of n.data.slice().sort(function(e){return(t,n)=>{const o=t[e],r=n[e];return o>r?1:o<r?-1:0}}(o))){const[n,i]=ye(t,o,e,l),[u,c]=he(t,r),f=t[a];void 0!==n&&void 0!==u&&(s.x.push(n),s.y.push(u),s.text.push([f,i,c].filter(Boolean).join("<br>")||null))}return"box"===e&&(s.boxpoints="outliers"),s}))),[n,o,r,e,t,l,a])}function ye(e,t,n,o){const[r,a]=be(e,t);return"box"===n?"year"===o?[r.split("-")[0],a]:"month"===o?[r.split("-").slice(0,2).join("-"),a]:["",a]:[r,a]}function he(e,t){return be(e,t)}function be(e,t){const n=e[t];return"string"!=typeof n||">"!==n[0]&&"<"!==n[0]||isNaN(+n.slice(1))?[n,null]:[+n.slice(1),`Note: ${t} ${n}`]}function me(e){const t=[];for(const[n,o]of Object.entries(e))"data"!==n&&t.push(o);return t.join(" ")}function Series({datasets:e,x:t,y:o,layout:r,style:a}){const l=usePlotly(),s=usePlotData({datasets:e,x:t,y:o,type:"scatter",mode:"lines+markers"}),i=usePlotLayout({x:t,y:o,layout:r});return n.createElement(l,{data:s,layout:i,useResizeHandler:!0,style:{flex:1,...a}})}function Scatter({datasets:e,x:t,y:o,label:r,layout:a,style:l}){const s=usePlotly(),i=usePlotData({datasets:e,x:t,y:o,type:"scatter",mode:"markers",label:r}),u=usePlotLayout({x:t,y:o,layout:a});return n.createElement(s,{data:i,layout:u,useResizeHandler:!0,style:{flex:1,...l}})}function Boxplot({datasets:e,x:t,y:o,group:r,layout:a,style:l}){const s=usePlotly(),i=usePlotData({datasets:e,x:t,y:o,type:"box",group:r,label:t}),u=usePlotLayout({x:t,y:o,type:"box",layout:a});return n.createElement(s,{data:i,layout:u,useResizeHandler:!0,style:{flex:1,...l}})}Series.propTypes={datasets:A.arrayOf(A.object),x:A.string,y:A.string,layout:A.object,style:A.object},Scatter.propTypes={datasets:A.arrayOf(A.object),x:A.string,y:A.string,label:A.string,layout:A.object,style:A.object},Boxplot.propTypes={datasets:A.arrayOf(A.object),x:A.string,y:A.string,group:A.string,layout:A.object,style:A.object};const ve={name:"chart",config:t,init(e){Object.assign(this.config,e)}};export{Boxplot,Scatter,Series,ve as default,usePlotData,usePlotLayout,usePlotly};
//# sourceMappingURL=chart.js.map
