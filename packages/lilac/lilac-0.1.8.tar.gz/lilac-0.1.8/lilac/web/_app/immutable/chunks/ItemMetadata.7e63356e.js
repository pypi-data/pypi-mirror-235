import{S as ne,i as ae,s as ie,k as C,a as U,q as re,e as N,l as D,m as L,h as k,c as W,r as se,n as F,G as b,p as O,b as $,a0 as P,H as he,v as H,d as w,f as K,g as v,u as oe,W as me,X as _e,a2 as ge,a3 as X,y as T,z as Y,A as q,B,a4 as pe,O as be}from"./index.bbac10d2.js";import{a8 as ve,az as ke,al as I,a0 as we,au as Se,aH as Ee,aM as Ve,a2 as ye,aC as $e,aI as Ie,bv as Pe,aO as Fe,bw as Ne,bx as Ae,ad as Ce}from"./Commands.5e9f8118.js";import{s as J,C as De,a as Le}from"./notificationsStore.8de3746c.js";function Q(r,e,l){const t=r.slice();return t[2]=e[l],t}function Re(r){let e,l;return e=new De({}),{c(){T(e.$$.fragment)},l(t){Y(e.$$.fragment,t)},m(t,n){q(e,t,n),l=!0},i(t){l||(v(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function Me(r){let e,l;return e=new Le({}),{c(){T(e.$$.fragment)},l(t){Y(e.$$.fragment,t)},m(t,n){q(e,t,n),l=!0},i(t){l||(v(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function Z(r){var o;let e,l=(r[0].formattedValue||((o=r[0].children)!=null&&o.length?"":"n/a"))+"",t,n;return{c(){e=C("div"),t=re(l),this.h()},l(a){e=D(a,"DIV",{title:!0,class:!0});var s=L(e);t=se(s,l),s.forEach(k),this.h()},h(){var a,s;F(e,"title",n=(a=r[0].value)==null?void 0:a.toString()),F(e,"class","truncated text-right svelte-1woyz4e"),b(e,"italic",!r[0].formattedValue&&!((s=r[0].children)!=null&&s.length))},m(a,s){$(a,e,s),P(e,t)},p(a,s){var i,c,d;s&1&&l!==(l=(a[0].formattedValue||((i=a[0].children)!=null&&i.length?"":"n/a"))+"")&&oe(t,l),s&1&&n!==(n=(c=a[0].value)==null?void 0:c.toString())&&F(e,"title",n),s&1&&b(e,"italic",!a[0].formattedValue&&!((d=a[0].children)!=null&&d.length))},d(a){a&&k(e)}}}function x(r){let e,l=[],t=new Map,n,o,a=r[0].children;const s=i=>ve(i[2].path);for(let i=0;i<a.length;i+=1){let c=Q(r,a,i),d=s(c);t.set(d,l[i]=ee(d,c))}return{c(){e=C("div");for(let i=0;i<l.length;i+=1)l[i].c();this.h()},l(i){e=D(i,"DIV",{});var c=L(e);for(let d=0;d<l.length;d+=1)l[d].l(c);c.forEach(k),this.h()},h(){b(e,"bg-blue-100",r[0].isSignal),b(e,"bg-emerald-100",r[0].isPreviewSignal)},m(i,c){$(i,e,c);for(let d=0;d<l.length;d+=1)l[d]&&l[d].m(e,null);o=!0},p(i,c){c&1&&(a=i[0].children,H(),l=me(l,c,s,1,i,a,t,e,_e,ee,null,Q),K()),(!o||c&1)&&b(e,"bg-blue-100",i[0].isSignal),(!o||c&1)&&b(e,"bg-emerald-100",i[0].isPreviewSignal)},i(i){if(!o){for(let c=0;c<a.length;c+=1)v(l[c]);i&&ge(()=>{o&&(n||(n=X(e,J,{},!0)),n.run(1))}),o=!0}},o(i){for(let c=0;c<l.length;c+=1)w(l[c]);i&&(n||(n=X(e,J,{},!1)),n.run(0)),o=!1},d(i){i&&k(e);for(let c=0;c<l.length;c+=1)l[c].d();i&&n&&n.end()}}}function ee(r,e){let l,t,n;return t=new ce({props:{node:e[2]}}),{key:r,first:null,c(){l=N(),T(t.$$.fragment),this.h()},l(o){l=N(),Y(t.$$.fragment,o),this.h()},h(){this.first=l},m(o,a){$(o,l,a),q(t,o,a),n=!0},p(o,a){e=o;const s={};a&1&&(s.node=e[2]),t.$set(s)},i(o){n||(v(t.$$.fragment,o),n=!0)},o(o){w(t.$$.fragment,o),n=!1},d(o){o&&k(l),B(t,o)}}}function ze(r){var M;let e,l,t,n,o,a,s=r[0].fieldName+"",i,c,d,g,_,E,y;const A=[Me,Re],S=[];function R(f,u){return f[0].expanded?0:1}t=R(r),n=S[t]=A[t](r);let m=(r[0].formattedValue||!((M=r[0].children)!=null&&M.length))&&Z(r),h=r[0].children&&r[0].expanded&&x(r);return{c(){e=C("div"),l=C("button"),n.c(),o=U(),a=C("div"),i=re(s),c=U(),m&&m.c(),d=U(),h&&h.c(),g=N(),this.h()},l(f){e=D(f,"DIV",{class:!0});var u=L(e);l=D(u,"BUTTON",{class:!0});var p=L(l);n.l(p),p.forEach(k),o=W(u),a=D(u,"DIV",{class:!0});var V=L(a);i=se(V,s),V.forEach(k),c=W(u),m&&m.l(u),u.forEach(k),d=W(f),h&&h.l(f),g=N(),this.h()},h(){var f;F(l,"class","p-1"),b(l,"invisible",!((f=r[0].children)!=null&&f.length)),F(a,"class","truncated font-mono font-medium text-neutral-500 svelte-1woyz4e"),O(a,"min-width","10ch"),F(e,"class","flex items-center gap-x-1 pr-2 text-xs"),b(e,"bg-blue-100",r[0].isSignal),b(e,"bg-emerald-100",r[0].isPreviewSignal),b(e,"bg-teal-100",r[0].isLabel),O(e,"padding-left",.25+(r[0].path.length-1)*.5+"rem"),O(e,"line-height","1.7rem")},m(f,u){$(f,e,u),P(e,l),S[t].m(l,null),P(e,o),P(e,a),P(a,i),P(e,c),m&&m.m(e,null),$(f,d,u),h&&h.m(f,u),$(f,g,u),_=!0,E||(y=he(l,"click",r[1]),E=!0)},p(f,[u]){var V,z;let p=t;t=R(f),t!==p&&(H(),w(S[p],1,1,()=>{S[p]=null}),K(),n=S[t],n||(n=S[t]=A[t](f),n.c()),v(n,1),n.m(l,null)),(!_||u&1)&&b(l,"invisible",!((V=f[0].children)!=null&&V.length)),(!_||u&1)&&s!==(s=f[0].fieldName+"")&&oe(i,s),f[0].formattedValue||!((z=f[0].children)!=null&&z.length)?m?m.p(f,u):(m=Z(f),m.c(),m.m(e,null)):m&&(m.d(1),m=null),(!_||u&1)&&b(e,"bg-blue-100",f[0].isSignal),(!_||u&1)&&b(e,"bg-emerald-100",f[0].isPreviewSignal),(!_||u&1)&&b(e,"bg-teal-100",f[0].isLabel),u&1&&O(e,"padding-left",.25+(f[0].path.length-1)*.5+"rem"),f[0].children&&f[0].expanded?h?(h.p(f,u),u&1&&v(h,1)):(h=x(f),h.c(),v(h,1),h.m(g.parentNode,g)):h&&(H(),w(h,1,1,()=>{h=null}),K())},i(f){_||(v(n),v(h),_=!0)},o(f){w(n),w(h),_=!1},d(f){f&&k(e),S[t].d(),m&&m.d(),f&&k(d),h&&h.d(f),f&&k(g),E=!1,y()}}}function fe(r){r.expanded=!0,r.children&&r.children.forEach(fe)}function Oe(r,e,l){let{node:t}=e;const n=()=>{l(0,t.expanded=!t.expanded,t),t.isSignal&&t.expanded&&fe(t),l(0,t)};return r.$$set=o=>{"node"in o&&l(0,t=o.node)},[t,n]}class ce extends ne{constructor(e){super(),ae(this,e,Oe,ze,ie,{node:0})}}function te(r,e,l){const t=r.slice();return t[7]=e[l],t}function le(r){let e,l;return e=new ce({props:{node:r[7]}}),{c(){T(e.$$.fragment)},l(t){Y(e.$$.fragment,t)},m(t,n){q(e,t,n),l=!0},p(t,n){const o={};n&1&&(o.node=t[7]),e.$set(o)},i(t){l||(v(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function He(r){let e,l,t=r[0].children||[],n=[];for(let a=0;a<t.length;a+=1)n[a]=le(te(r,t,a));const o=a=>w(n[a],1,1,()=>{n[a]=null});return{c(){for(let a=0;a<n.length;a+=1)n[a].c();e=N()},l(a){for(let s=0;s<n.length;s+=1)n[s].l(a);e=N()},m(a,s){for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(a,s);$(a,e,s),l=!0},p(a,[s]){if(s&1){t=a[0].children||[];let i;for(i=0;i<t.length;i+=1){const c=te(a,t,i);n[i]?(n[i].p(c,s),v(n[i],1)):(n[i]=le(c),n[i].c(),v(n[i],1),n[i].m(e.parentNode,e))}for(H(),i=t.length;i<n.length;i+=1)o(i);K()}},i(a){if(!l){for(let s=0;s<t.length;s+=1)v(n[s]);l=!0}},o(a){n=n.filter(Boolean);for(let s=0;s<n.length;s+=1)w(n[s]);l=!1},d(a){pe(n,a),a&&k(e)}}}function Ke(r,e,l){let t,n,{row:o}=e,{selectRowsSchema:a=void 0}=e,{highlightedFields:s}=e;const i=ke();be(r,i,d=>l(5,n=d));function c(d){var f;const g=I.field(d),_=I.path(d);let E=I.value(d),y=I.span(d);if(g.dtype==="string_span"&&(y=y||E,y!=null)){const u=[];for(let p=_.length-1;p>=0;p--){const V=_.slice(0,p);if(we(a.schema,V).dtype==="string"){const j=I.value(Se(o,V));u.push(j.slice(y.start,y.end));break}}E=u}const A=((f=n.data)==null?void 0:f.some(u=>{var p;return u.name===((p=g.signal)==null?void 0:p.signal_name)}))||!1,S=Ee(g),R=Ve(g);let m;A||S&&g.dtype==null||g.dtype==="embedding"||g.repeated_field!=null?m="":E==null?m=null:m=ye(E);function h(u){const{[Pe]:p,[Fe]:V,[Ne]:z,[Ae]:j,[Ce]:Te,...de}=u;return Object.values(de).filter(ue=>{var G;return((G=I.field(ue))==null?void 0:G.label)==null})}const M=s.some(u=>$e(u.path,_));return{children:Array.isArray(d)?d.map(c):h(d).map(c),fieldName:_[_.length-1],field:g,path:_,expanded:M,isSignal:S,isLabel:R,isPreviewSignal:a!=null?Ie(a,_):!1,isEmbeddingSignal:A,value:E,formattedValue:m}}return r.$$set=d=>{"row"in d&&l(2,o=d.row),"selectRowsSchema"in d&&l(3,a=d.selectRowsSchema),"highlightedFields"in d&&l(4,s=d.highlightedFields)},r.$$.update=()=>{r.$$.dirty&4&&l(0,t=c(o))},[t,i,o,a,s]}class Ue extends ne{constructor(e){super(),ae(this,e,Ke,He,ie,{row:2,selectRowsSchema:3,highlightedFields:4})}}export{Ue as I};
