import{S as R,i as j,s as F,y as T,z as E,A as S,g as m,d as k,B,O as z,k as q,a as O,l as H,m as I,c as V,h as a,n as y,b as p,a0 as G,v as D,f as P,e as L,q as d,r as $,u as w}from"../chunks/index.bbac10d2.js";import{g as J}from"../chunks/navigation.25d74c08.js";import{P as K,b as Q}from"../chunks/Page.b49c4ddf.js";import{g as X,q as Y,z as Z,B as x,ag as ee}from"../chunks/Commands.5e9f8118.js";import{T as M}from"../chunks/ToastNotification.4768f384.js";function U(n){let l,r;return l=new M({props:{hideCloseButton:!0,kind:"warning",fullWidth:!0,lowContrast:!0,title:"Unknown task",caption:"This could be from a stale link, or a new server instance."}}),{c(){T(l.$$.fragment)},l(s){E(l.$$.fragment,s)},m(s,t){S(l,s,t),r=!0},i(s){r||(m(l.$$.fragment,s),r=!0)},o(s){k(l.$$.fragment,s),r=!1},d(s){B(l,s)}}}function A(n){let l,r,s,t,e,i,o;function h(f,_){if(f[0].status=="pending")return se;if(f[0].status==="completed")return le;if(f[0].status==="error")return te}let b=h(n),c=b&&b(n),u=n[0].status!="error"&&W(n);const C=[ie,re],g=[];function v(f,_){return f[0].status=="completed"?0:f[0].status==="error"?1:-1}return~(t=v(n))&&(e=g[t]=C[t](n)),{c(){l=q("h3"),c&&c.c(),r=O(),u&&u.c(),s=O(),e&&e.c(),i=L()},l(f){l=H(f,"H3",{});var _=I(l);c&&c.l(_),_.forEach(a),r=V(f),u&&u.l(f),s=V(f),e&&e.l(f),i=L()},m(f,_){p(f,l,_),c&&c.m(l,null),p(f,r,_),u&&u.m(f,_),p(f,s,_),~t&&g[t].m(f,_),p(f,i,_),o=!0},p(f,_){b===(b=h(f))&&c?c.p(f,_):(c&&c.d(1),c=b&&b(f),c&&(c.c(),c.m(l,null))),f[0].status!="error"?u?(u.p(f,_),_&1&&m(u,1)):(u=W(f),u.c(),m(u,1),u.m(s.parentNode,s)):u&&(D(),k(u,1,1,()=>{u=null}),P());let N=t;t=v(f),t===N?~t&&g[t].p(f,_):(e&&(D(),k(g[N],1,1,()=>{g[N]=null}),P()),~t?(e=g[t],e?e.p(f,_):(e=g[t]=C[t](f),e.c()),m(e,1),e.m(i.parentNode,i)):e=null)},i(f){o||(m(u),m(e),o=!0)},o(f){k(u),k(e),o=!1},d(f){f&&a(l),c&&c.d(),f&&a(r),u&&u.d(f),f&&a(s),~t&&g[t].d(f),f&&a(i)}}}function te(n){let l,r,s,t;return{c(){l=d("Error loading "),r=d(n[2]),s=d("/"),t=d(n[3])},l(e){l=$(e,"Error loading "),r=$(e,n[2]),s=$(e,"/"),t=$(e,n[3])},m(e,i){p(e,l,i),p(e,r,i),p(e,s,i),p(e,t,i)},p(e,i){i&4&&w(r,e[2]),i&8&&w(t,e[3])},d(e){e&&a(l),e&&a(r),e&&a(s),e&&a(t)}}}function le(n){let l,r,s,t;return{c(){l=d("Done loading "),r=d(n[2]),s=d("/"),t=d(n[3])},l(e){l=$(e,"Done loading "),r=$(e,n[2]),s=$(e,"/"),t=$(e,n[3])},m(e,i){p(e,l,i),p(e,r,i),p(e,s,i),p(e,t,i)},p(e,i){i&4&&w(r,e[2]),i&8&&w(t,e[3])},d(e){e&&a(l),e&&a(r),e&&a(s),e&&a(t)}}}function se(n){let l,r,s,t,e;return{c(){l=d("Loading "),r=d(n[2]),s=d("/"),t=d(n[3]),e=d("...")},l(i){l=$(i,"Loading "),r=$(i,n[2]),s=$(i,"/"),t=$(i,n[3]),e=$(i,"...")},m(i,o){p(i,l,o),p(i,r,o),p(i,s,o),p(i,t,o),p(i,e,o)},p(i,o){o&4&&w(r,i[2]),o&8&&w(t,i[3])},d(i){i&&a(l),i&&a(r),i&&a(s),i&&a(t),i&&a(e)}}}function W(n){let l,r,s;return r=new Q({props:{labelText:n[0].message||"",helperText:n[0].status!="completed"?n[0].details||void 0:"",value:n[0].status==="completed"?1:n[4],max:1,status:n[7][n[0].status]}}),{c(){l=q("div"),T(r.$$.fragment),this.h()},l(t){l=H(t,"DIV",{class:!0});var e=I(l);E(r.$$.fragment,e),e.forEach(a),this.h()},h(){y(l,"class","mt-6")},m(t,e){p(t,l,e),S(r,l,null),s=!0},p(t,e){const i={};e&1&&(i.labelText=t[0].message||""),e&1&&(i.helperText=t[0].status!="completed"?t[0].details||void 0:""),e&17&&(i.value=t[0].status==="completed"?1:t[4]),e&1&&(i.status=t[7][t[0].status]),r.$set(i)},i(t){s||(m(r.$$.fragment,t),s=!0)},o(t){k(r.$$.fragment,t),s=!1},d(t){t&&a(l),B(r)}}}function re(n){let l,r;return l=new M({props:{hideCloseButton:!0,kind:"error",fullWidth:!0,lowContrast:!0,title:"Error loading dataset",caption:n[0].error||void 0}}),{c(){T(l.$$.fragment)},l(s){E(l.$$.fragment,s)},m(s,t){S(l,s,t),r=!0},p(s,t){const e={};t&1&&(e.caption=s[0].error||void 0),l.$set(e)},i(s){r||(m(l.$$.fragment,s),r=!0)},o(s){k(l.$$.fragment,s),r=!1},d(s){B(l,s)}}}function ie(n){let l,r,s;return r=new x({props:{size:"xl",icon:ee,iconDescription:"Open dataset",$$slots:{default:[ne]},$$scope:{ctx:n}}}),r.$on("click",n[10]),{c(){l=q("div"),T(r.$$.fragment),this.h()},l(t){l=H(t,"DIV",{class:!0});var e=I(l);E(r.$$.fragment,e),e.forEach(a),this.h()},h(){y(l,"class","dataset-link mt-8")},m(t,e){p(t,l,e),S(r,l,null),s=!0},p(t,e){const i={};e&2048&&(i.$$scope={dirty:e,ctx:t}),r.$set(i)},i(t){s||(m(r.$$.fragment,t),s=!0)},o(t){k(r.$$.fragment,t),s=!1},d(t){t&&a(l),B(r)}}}function ne(n){let l;return{c(){l=d("Open dataset")},l(r){l=$(r,"Open dataset")},m(r,s){p(r,l,s)},d(r){r&&a(l)}}}function fe(n){let l,r,s,t=n[1].isSuccess&&n[0]==null&&U(),e=n[0]&&A(n);return{c(){l=q("div"),t&&t.c(),r=O(),e&&e.c(),this.h()},l(i){l=H(i,"DIV",{class:!0});var o=I(l);t&&t.l(o),r=V(o),e&&e.l(o),o.forEach(a),this.h()},h(){y(l,"class","w-full p-8")},m(i,o){p(i,l,o),t&&t.m(l,null),G(l,r),e&&e.m(l,null),s=!0},p(i,o){i[1].isSuccess&&i[0]==null?t?o&3&&m(t,1):(t=U(),t.c(),m(t,1),t.m(l,r)):t&&(D(),k(t,1,1,()=>{t=null}),P()),i[0]?e?(e.p(i,o),o&1&&m(e,1)):(e=A(i),e.c(),m(e,1),e.m(l,null)):e&&(D(),k(e,1,1,()=>{e=null}),P())},i(i){s||(m(t),m(e),s=!0)},o(i){k(t),k(e),s=!1},d(i){i&&a(l),t&&t.d(),e&&e.d()}}}function oe(n){let l,r;return l=new K({props:{$$slots:{default:[fe]},$$scope:{ctx:n}}}),{c(){T(l.$$.fragment)},l(s){E(l.$$.fragment,s)},m(s,t){S(l,s,t),r=!0},p(s,[t]){const e={};t&2079&&(e.$$scope={dirty:t,ctx:s}),l.$set(e)},i(s){r||(m(l.$$.fragment,s),r=!0)},o(s){k(l.$$.fragment,s),r=!1},d(s){B(l,s)}}}function ae(n,l,r){let s,t,e,i,o,h,b;const c=X();z(n,c,v=>r(9,i=v));const u=Y();z(n,u,v=>r(1,e=v));const C={pending:"active",completed:"finished",error:"error"},g=()=>J(Z(o,h));return n.$$.update=()=>{n.$$.dirty&512&&i.page==="datasets/loading"&&i.identifier!=null&&r(2,[o,h,b]=i.identifier.split("/"),o,(r(3,h),r(9,i)),(r(8,b),r(9,i))),n.$$.dirty&258&&r(0,s=b!=null&&e.data!=null?e.data.tasks[b]:null),n.$$.dirty&1&&r(4,t=(s==null?void 0:s.step_progress)==null?void 0:s.step_progress)},[s,e,o,h,t,c,u,C,b,i,g]}class de extends R{constructor(l){super(),j(this,l,ae,oe,F,{})}}export{de as component};
