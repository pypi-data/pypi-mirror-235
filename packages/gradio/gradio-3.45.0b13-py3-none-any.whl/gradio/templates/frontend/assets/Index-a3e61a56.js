import{u as qe,c as cl,g as ze,B as ml,n as dl}from"./Button-c3cdaf88.js";import{d as bl}from"./index-2f00b72c.js";import{S as hl}from"./ShareButton-ad20b2fd.js";import{M as gl}from"./Index.svelte_svelte_type_style_lang-6d325cae.js";import{S as wl}from"./Index-3fe49d12.js";import"./index-94f2722f.js";import{C as kl,a as vl}from"./Copy-1b5c0932.js";import{B as pl}from"./BlockLabel-eeca5f51.js";import"./IconButton-0244936c.js";import"./svelte/svelte.js";const{SvelteComponent:Cl,append:Be,attr:M,detach:yl,init:jl,insert:Sl,noop:ve,safe_not_equal:ql,svg_element:pe}=window.__gradio__svelte__internal;function zl(l){let e,i,t;return{c(){e=pe("svg"),i=pe("path"),t=pe("path"),M(i,"fill","currentColor"),M(i,"d","M17.74 30L16 29l4-7h6a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h9v2H6a4 4 0 0 1-4-4V8a4 4 0 0 1 4-4h20a4 4 0 0 1 4 4v12a4 4 0 0 1-4 4h-4.84Z"),M(t,"fill","currentColor"),M(t,"d","M8 10h16v2H8zm0 6h10v2H8z"),M(e,"xmlns","http://www.w3.org/2000/svg"),M(e,"xmlns:xlink","http://www.w3.org/1999/xlink"),M(e,"aria-hidden","true"),M(e,"role","img"),M(e,"class","iconify iconify--carbon"),M(e,"width","100%"),M(e,"height","100%"),M(e,"preserveAspectRatio","xMidYMid meet"),M(e,"viewBox","0 0 32 32")},m(n,r){Sl(n,e,r),Be(e,i),Be(e,t)},p:ve,i:ve,o:ve,d(n){n&&yl(e)}}}class Bl extends Cl{constructor(e){super(),jl(this,e,null,zl,ql,{})}}const{SvelteComponent:Hl,append:He,attr:y,detach:Ml,init:Ll,insert:Tl,noop:Me,safe_not_equal:El,svg_element:Ce}=window.__gradio__svelte__internal;function Al(l){let e,i,t,n;return{c(){e=Ce("svg"),i=Ce("path"),t=Ce("path"),y(i,"stroke","currentColor"),y(i,"stroke-width","1.5"),y(i,"stroke-linecap","round"),y(i,"d","M16.472 3.5H4.1a.6.6 0 0 0-.6.6v9.8a.6.6 0 0 0 .6.6h2.768a2 2 0 0 1 1.715.971l2.71 4.517a1.631 1.631 0 0 0 2.961-1.308l-1.022-3.408a.6.6 0 0 1 .574-.772h4.575a2 2 0 0 0 1.93-2.526l-1.91-7A2 2 0 0 0 16.473 3.5Z"),y(t,"stroke","currentColor"),y(t,"stroke-width","1.5"),y(t,"stroke-linecap","round"),y(t,"stroke-linejoin","round"),y(t,"d","M7 14.5v-11"),y(e,"xmlns","http://www.w3.org/2000/svg"),y(e,"width","15px"),y(e,"height","15px"),y(e,"viewBox","0 0 24 24"),y(e,"fill",n=l[0]?"currentColor":"none"),y(e,"stroke-width","1.5"),y(e,"color","currentColor")},m(r,o){Tl(r,e,o),He(e,i),He(e,t)},p(r,[o]){o&1&&n!==(n=r[0]?"currentColor":"none")&&y(e,"fill",n)},i:Me,o:Me,d(r){r&&Ml(e)}}}function Dl(l,e,i){let{actioned:t}=e;return l.$$set=n=>{"actioned"in n&&i(0,t=n.actioned)},[t]}class Nl extends Hl{constructor(e){super(),Ll(this,e,Dl,Al,El,{actioned:0})}}const{SvelteComponent:Pl,append:Le,attr:j,detach:Il,init:Ul,insert:Vl,noop:Te,safe_not_equal:Zl,svg_element:ye}=window.__gradio__svelte__internal;function Fl(l){let e,i,t,n;return{c(){e=ye("svg"),i=ye("path"),t=ye("path"),j(i,"stroke","currentColor"),j(i,"stroke-width","1.5"),j(i,"stroke-linecap","round"),j(i,"d","M16.472 20H4.1a.6.6 0 0 1-.6-.6V9.6a.6.6 0 0 1 .6-.6h2.768a2 2 0 0 0 1.715-.971l2.71-4.517a1.631 1.631 0 0 1 2.961 1.308l-1.022 3.408a.6.6 0 0 0 .574.772h4.575a2 2 0 0 1 1.93 2.526l-1.91 7A2 2 0 0 1 16.473 20Z"),j(t,"stroke","currentColor"),j(t,"stroke-width","1.5"),j(t,"stroke-linecap","round"),j(t,"stroke-linejoin","round"),j(t,"d","M7 20V9"),j(e,"xmlns","http://www.w3.org/2000/svg"),j(e,"width","15px"),j(e,"height","15px"),j(e,"viewBox","0 0 24 24"),j(e,"fill",n=l[0]?"currentColor":"none"),j(e,"stroke-width","1.5"),j(e,"color","currentColor")},m(r,o){Vl(r,e,o),Le(e,i),Le(e,t)},p(r,[o]){o&1&&n!==(n=r[0]?"currentColor":"none")&&j(e,"fill",n)},i:Te,o:Te,d(r){r&&Il(e)}}}function Ol(l,e,i){let{actioned:t}=e;return l.$$set=n=>{"actioned"in n&&i(0,t=n.actioned)},[t]}class Rl extends Pl{constructor(e){super(),Ul(this,e,Ol,Fl,Zl,{actioned:0})}}const Yl=async l=>(await Promise.all(l.map(async i=>await Promise.all(i.map(async(t,n)=>{if(t===null)return"";let r=n===0?"ðŸ˜ƒ":"ðŸ¤–",o="";if(typeof t=="string"){const s={audio:/<audio.*?src="(\/file=.*?)"/g,video:/<video.*?src="(\/file=.*?)"/g,image:/<img.*?src="(\/file=.*?)".*?\/>|!\[.*?\]\((\/file=.*?)\)/g};o=t;for(let[a,f]of Object.entries(s)){let u;for(;(u=f.exec(t))!==null;){const w=u[1]||u[2],L=await qe(w,"url");o=o.replace(w,L)}}}else{const s=await qe(t.data,"url");t.mime_type?.includes("audio")?o=`<audio controls src="${s}"></audio>`:t.mime_type?.includes("video")?o=s:t.mime_type?.includes("image")&&(o=`<img src="${s}" />`)}return`${r}: ${o}`}))))).map(i=>i.join(i[0]!==""&&i[1]!==""?`
`:"")).join(`
`);const{SvelteComponent:Gl,append:Jl,attr:se,check_outros:Ee,create_component:ol,destroy_component:rl,detach:Kl,element:Ql,group_outros:Ae,init:Wl,insert:Xl,listen:$l,mount_component:sl,safe_not_equal:xl,space:et,transition_in:J,transition_out:$}=window.__gradio__svelte__internal,{onDestroy:lt}=window.__gradio__svelte__internal;function De(l){let e,i;return e=new kl({}),{c(){ol(e.$$.fragment)},m(t,n){sl(e,t,n),i=!0},i(t){i||(J(e.$$.fragment,t),i=!0)},o(t){$(e.$$.fragment,t),i=!1},d(t){rl(e,t)}}}function Ne(l){let e,i;return e=new vl({}),{c(){ol(e.$$.fragment)},m(t,n){sl(e,t,n),i=!0},i(t){i||(J(e.$$.fragment,t),i=!0)},o(t){$(e.$$.fragment,t),i=!1},d(t){rl(e,t)}}}function tt(l){let e,i,t,n,r,o,s=!l[0]&&De(),a=l[0]&&Ne();return{c(){e=Ql("button"),s&&s.c(),i=et(),a&&a.c(),se(e,"title","copy"),se(e,"aria-label",t=l[0]?"Copied message":"Copy message"),se(e,"class","svelte-11hlfrc")},m(f,u){Xl(f,e,u),s&&s.m(e,null),Jl(e,i),a&&a.m(e,null),n=!0,r||(o=$l(e,"click",l[1]),r=!0)},p(f,[u]){f[0]?s&&(Ae(),$(s,1,1,()=>{s=null}),Ee()):s?u&1&&J(s,1):(s=De(),s.c(),J(s,1),s.m(e,i)),f[0]?a?u&1&&J(a,1):(a=Ne(),a.c(),J(a,1),a.m(e,null)):a&&(Ae(),$(a,1,1,()=>{a=null}),Ee()),(!n||u&1&&t!==(t=f[0]?"Copied message":"Copy message"))&&se(e,"aria-label",t)},i(f){n||(J(s),J(a),n=!0)},o(f){$(s),$(a),n=!1},d(f){f&&Kl(e),s&&s.d(),a&&a.d(),r=!1,o()}}}function nt(l,e,i){let t=!1,{value:n}=e,r;function o(){i(0,t=!0),r&&clearTimeout(r),r=setTimeout(()=>{i(0,t=!1)},2e3)}async function s(){if("clipboard"in navigator)await navigator.clipboard.writeText(n),o();else{const a=document.createElement("textarea");a.value=n,a.style.position="absolute",a.style.left="-999999px",document.body.prepend(a),a.select();try{document.execCommand("copy"),o()}catch(f){console.error(f)}finally{a.remove()}}}return lt(()=>{r&&clearTimeout(r)}),l.$$set=a=>{"value"in a&&i(2,n=a.value)},[t,s,n]}class it extends Gl{constructor(e){super(),Wl(this,e,nt,tt,xl,{value:2})}}const{SvelteComponent:at,attr:ie,create_component:ot,destroy_component:rt,detach:st,element:ft,init:ut,insert:_t,listen:Pe,mount_component:ct,run_all:mt,safe_not_equal:dt,transition_in:bt,transition_out:ht}=window.__gradio__svelte__internal;function gt(l){let e,i,t,n,r,o,s;return i=new l[3]({props:{actioned:l[2]}}),{c(){e=ft("button"),ot(i.$$.fragment),ie(e,"title",t=l[0]+" message"),ie(e,"aria-label",n=l[2]?`clicked ${l[0]}`:l[0]),ie(e,"class","svelte-3snf3m")},m(a,f){_t(a,e,f),ct(i,e,null),r=!0,o||(s=[Pe(e,"click",l[5]),Pe(e,"keydown",l[6])],o=!0)},p(a,[f]){const u={};f&4&&(u.actioned=a[2]),i.$set(u),(!r||f&1&&t!==(t=a[0]+" message"))&&ie(e,"title",t),(!r||f&5&&n!==(n=a[2]?`clicked ${a[0]}`:a[0]))&&ie(e,"aria-label",n)},i(a){r||(bt(i.$$.fragment,a),r=!0)},o(a){ht(i.$$.fragment,a),r=!1},d(a){a&&st(e),rt(i),o=!1,mt(s)}}}function wt(l,e,i){let{action:t}=e,{handle_action:n}=e,r=!1,o=t==="like"?Rl:Nl;function s(){i(2,r=!0)}const a=()=>{s(),n()},f=u=>{u.key==="Enter"&&(s(),n())};return l.$$set=u=>{"action"in u&&i(0,t=u.action),"handle_action"in u&&i(1,n=u.handle_action)},[t,n,r,o,s,a,f]}class Ie extends at{constructor(e){super(),ut(this,e,wt,gt,dt,{action:0,handle_action:1})}}const{SvelteComponent:kt,attr:fe,detach:vt,element:pt,init:Ct,insert:yt,noop:Ue,safe_not_equal:jt,set_style:Ve}=window.__gradio__svelte__internal;function St(l){let e;return{c(){e=pt("div"),e.innerHTML=`<span class="sr-only">Loading content</span> <div class="dot-flashing svelte-1ofy3w8"></div>
	Â 
	<div class="dot-flashing svelte-1ofy3w8"></div>
	Â 
	<div class="dot-flashing svelte-1ofy3w8"></div>`,fe(e,"class","message pending svelte-1ofy3w8"),fe(e,"role","status"),fe(e,"aria-label","Loading response"),fe(e,"aria-live","polite"),Ve(e,"border-radius",l[0]==="bubble"?"var(--radius-xxl)":"none")},m(i,t){yt(i,e,t)},p(i,[t]){t&1&&Ve(e,"border-radius",i[0]==="bubble"?"var(--radius-xxl)":"none")},i:Ue,o:Ue,d(i){i&&vt(e)}}}function qt(l,e,i){let{layout:t="bubble"}=e;return l.$$set=n=>{"layout"in n&&i(0,t=n.layout)},[t]}class zt extends kt{constructor(e){super(),Ct(this,e,qt,St,jt,{layout:0})}}const{SvelteComponent:Bt,action_destroyer:Ht,append:N,attr:m,binding_callbacks:Mt,bubble:G,check_outros:U,create_component:ee,destroy_component:le,destroy_each:fl,detach:B,element:z,empty:je,ensure_array_like:ue,group_outros:V,init:Lt,insert:H,listen:Q,mount_component:te,noop:W,null_to_empty:Ze,run_all:Se,safe_not_equal:Tt,set_data:Et,set_style:At,space:x,src_url_equal:X,text:Dt,toggle_class:C,transition_in:d,transition_out:k}=window.__gradio__svelte__internal,{beforeUpdate:Nt,afterUpdate:Pt,createEventDispatcher:It}=window.__gradio__svelte__internal;function Fe(l,e,i){const t=l.slice();return t[37]=e[i],t[39]=i,t}function Oe(l,e,i){const t=l.slice();return t[40]=e[i],t[42]=i,t}function Re(l){let e,i,t;return i=new hl({props:{i18n:l[15],formatter:Yl,value:l[0]}}),i.$on("error",l[28]),i.$on("share",l[29]),{c(){e=z("div"),ee(i.$$.fragment),m(e,"class","share-button svelte-1pjfiar")},m(n,r){H(n,e,r),te(i,e,null),t=!0},p(n,r){const o={};r[0]&32768&&(o.i18n=n[15]),r[0]&1&&(o.value=n[0]),i.$set(o)},i(n){t||(d(i.$$.fragment,n),t=!0)},o(n){k(i.$$.fragment,n),t=!1},d(n){n&&B(e),le(i)}}}function Ye(l){let e,i,t=ue(l[0]),n=[];for(let o=0;o<t.length;o+=1)n[o]=$e(Fe(l,t,o));const r=o=>k(n[o],1,1,()=>{n[o]=null});return{c(){for(let o=0;o<n.length;o+=1)n[o].c();e=je()},m(o,s){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(o,s);H(o,e,s),i=!0},p(o,s){if(s[0]&1933279){t=ue(o[0]);let a;for(a=0;a<t.length;a+=1){const f=Fe(o,t,a);n[a]?(n[a].p(f,s),d(n[a],1)):(n[a]=$e(f),n[a].c(),d(n[a],1),n[a].m(e.parentNode,e))}for(V(),a=t.length;a<n.length;a+=1)r(a);U()}},i(o){if(!i){for(let s=0;s<t.length;s+=1)d(n[s]);i=!0}},o(o){n=n.filter(Boolean);for(let s=0;s<n.length;s+=1)k(n[s]);i=!1},d(o){o&&B(e),fl(n,o)}}}function Ge(l){let e,i,t,n,r,o,s,a,f,u,w,L,P,A,v,I,Z,p=l[8][l[42]]!==null&&Je(l);const F=[Rt,Ot,Ft,Zt,Vt,Ut],q=[];function S(g,h){return h[0]&1&&(r=null),h[0]&1&&(o=null),h[0]&1&&(s=null),typeof g[40]=="string"?0:(r==null&&(r=!!(g[40]!==null&&g[40].file.mime_type?.includes("audio"))),r?1:(o==null&&(o=!!(g[40]!==null&&g[40].file.mime_type?.includes("video"))),o?2:(s==null&&(s=!!(g[40]!==null&&g[40].file.mime_type?.includes("image"))),s?3:g[40]!==null&&g[40].file.data!==null?4:g[2]&&g[42]===1?5:-1)))}~(a=S(l,[-1,-1]))&&(f=q[a]=F[a](l));function O(){return l[30](l[39],l[42],l[40])}function R(...g){return l[31](l[39],l[42],l[40],...g)}let b=(l[4]&&l[42]!==0||l[7]&&l[40]&&typeof l[40]=="string")&&Ke(l);return{c(){e=z("div"),p&&p.c(),i=x(),t=z("div"),n=z("button"),f&&f.c(),L=x(),b&&b.c(),P=x(),m(n,"data-testid",l[42]==0?"user":"bot"),m(n,"dir",u=l[6]?"rtl":"ltr"),m(n,"aria-label",w=(l[42]==0?"user":"bot")+"'s message:' "+l[40]),m(n,"class","svelte-1pjfiar"),C(n,"latest",l[39]===l[0].length-1),C(n,"message-markdown-disabled",!l[11]),C(n,"selectable",l[3]),At(n,"text-align","left"),m(t,"class","message "+(l[42]==0?"user":"bot")+" svelte-1pjfiar"),C(t,"message-fit",l[16]==="bubble"&&!l[10]),C(t,"panel-full-width",l[16]==="panel"),C(t,"message-bubble-border",l[16]==="bubble"),C(t,"message-markdown-disabled",!l[11]),m(e,"class",A="message-row "+l[16]+" "+(l[42]==0?"user-row":"bot-row")+" svelte-1pjfiar")},m(g,h){H(g,e,h),p&&p.m(e,null),N(e,i),N(e,t),N(t,n),~a&&q[a].m(n,null),N(e,L),b&&b.m(e,null),N(e,P),v=!0,I||(Z=[Q(n,"click",O),Q(n,"keydown",R)],I=!0)},p(g,h){l=g,l[8][l[42]]!==null?p?p.p(l,h):(p=Je(l),p.c(),p.m(e,i)):p&&(p.d(1),p=null);let Y=a;a=S(l,h),a===Y?~a&&q[a].p(l,h):(f&&(V(),k(q[Y],1,1,()=>{q[Y]=null}),U()),~a?(f=q[a],f?f.p(l,h):(f=q[a]=F[a](l),f.c()),d(f,1),f.m(n,null)):f=null),(!v||h[0]&64&&u!==(u=l[6]?"rtl":"ltr"))&&m(n,"dir",u),(!v||h[0]&1&&w!==(w=(l[42]==0?"user":"bot")+"'s message:' "+l[40]))&&m(n,"aria-label",w),(!v||h[0]&1)&&C(n,"latest",l[39]===l[0].length-1),(!v||h[0]&2048)&&C(n,"message-markdown-disabled",!l[11]),(!v||h[0]&8)&&C(n,"selectable",l[3]),(!v||h[0]&66560)&&C(t,"message-fit",l[16]==="bubble"&&!l[10]),(!v||h[0]&65536)&&C(t,"panel-full-width",l[16]==="panel"),(!v||h[0]&65536)&&C(t,"message-bubble-border",l[16]==="bubble"),(!v||h[0]&2048)&&C(t,"message-markdown-disabled",!l[11]),l[4]&&l[42]!==0||l[7]&&l[40]&&typeof l[40]=="string"?b?(b.p(l,h),h[0]&145&&d(b,1)):(b=Ke(l),b.c(),d(b,1),b.m(e,P)):b&&(V(),k(b,1,1,()=>{b=null}),U()),(!v||h[0]&65536&&A!==(A="message-row "+l[16]+" "+(l[42]==0?"user-row":"bot-row")+" svelte-1pjfiar"))&&m(e,"class",A)},i(g){v||(d(f),d(b),v=!0)},o(g){k(f),k(b),v=!1},d(g){g&&B(e),p&&p.d(),~a&&q[a].d(),b&&b.d(),I=!1,Se(Z)}}}function Je(l){let e,i,t;return{c(){e=z("div"),i=z("img"),m(i,"class","avatar-image svelte-1pjfiar"),X(i.src,t=ze(l[8][l[42]],l[13],l[14]))||m(i,"src",t),m(i,"alt",(l[42]==0?"user":"bot")+" avatar"),m(e,"class","avatar-container svelte-1pjfiar")},m(n,r){H(n,e,r),N(e,i)},p(n,r){r[0]&24832&&!X(i.src,t=ze(n[8][n[42]],n[13],n[14]))&&m(i,"src",t)},d(n){n&&B(e)}}}function Ut(l){let e,i;return e=new zt({props:{layout:l[16]}}),{c(){ee(e.$$.fragment)},m(t,n){te(e,t,n),i=!0},p(t,n){const r={};n[0]&65536&&(r.layout=t[16]),e.$set(r)},i(t){i||(d(e.$$.fragment,t),i=!0)},o(t){k(e.$$.fragment,t),i=!1},d(t){le(e,t)}}}function Vt(l){let e,i=(l[40].file.orig_name||l[40].file.name)+"",t,n,r;return{c(){e=z("a"),t=Dt(i),m(e,"data-testid","chatbot-file"),m(e,"href",n=l[40].file.data),m(e,"target","_blank"),m(e,"download",r=window.__is_colab__?null:l[40].file.orig_name||l[40].file.name),m(e,"class","svelte-1pjfiar")},m(o,s){H(o,e,s),N(e,t)},p(o,s){s[0]&1&&i!==(i=(o[40].file.orig_name||o[40].file.name)+"")&&Et(t,i),s[0]&1&&n!==(n=o[40].file.data)&&m(e,"href",n),s[0]&1&&r!==(r=window.__is_colab__?null:o[40].file.orig_name||o[40].file.name)&&m(e,"download",r)},i:W,o:W,d(o){o&&B(e)}}}function Zt(l){let e,i,t;return{c(){e=z("img"),m(e,"data-testid","chatbot-image"),X(e.src,i=l[40].file.data)||m(e,"src",i),m(e,"alt",t=l[40].alt_text),m(e,"class","svelte-1pjfiar")},m(n,r){H(n,e,r)},p(n,r){r[0]&1&&!X(e.src,i=n[40].file.data)&&m(e,"src",i),r[0]&1&&t!==(t=n[40].alt_text)&&m(e,"alt",t)},i:W,o:W,d(n){n&&B(e)}}}function Ft(l){let e,i,t,n,r,o;return{c(){e=z("video"),i=z("track"),m(i,"kind","captions"),m(i,"class","svelte-1pjfiar"),m(e,"data-testid","chatbot-video"),e.controls=!0,X(e.src,t=l[40].file.data)||m(e,"src",t),m(e,"title",n=l[40].alt_text),m(e,"preload","auto"),m(e,"class","svelte-1pjfiar")},m(s,a){H(s,e,a),N(e,i),r||(o=[Q(e,"play",l[25]),Q(e,"pause",l[26]),Q(e,"ended",l[27])],r=!0)},p(s,a){a[0]&1&&!X(e.src,t=s[40].file.data)&&m(e,"src",t),a[0]&1&&n!==(n=s[40].alt_text)&&m(e,"title",n)},i:W,o:W,d(s){s&&B(e),r=!1,Se(o)}}}function Ot(l){let e,i,t,n,r;return{c(){e=z("audio"),m(e,"data-testid","chatbot-audio"),e.controls=!0,m(e,"preload","metadata"),X(e.src,i=l[40].file.data)||m(e,"src",i),m(e,"title",t=l[40].alt_text),m(e,"class","svelte-1pjfiar")},m(o,s){H(o,e,s),n||(r=[Q(e,"play",l[22]),Q(e,"pause",l[23]),Q(e,"ended",l[24])],n=!0)},p(o,s){s[0]&1&&!X(e.src,i=o[40].file.data)&&m(e,"src",i),s[0]&1&&t!==(t=o[40].alt_text)&&m(e,"title",t)},i:W,o:W,d(o){o&&B(e),n=!1,Se(r)}}}function Rt(l){let e,i;return e=new gl({props:{message:l[40],latex_delimiters:l[1],sanitize_html:l[9],render_markdown:l[11],line_breaks:l[12]}}),e.$on("load",l[18]),{c(){ee(e.$$.fragment)},m(t,n){te(e,t,n),i=!0},p(t,n){const r={};n[0]&1&&(r.message=t[40]),n[0]&2&&(r.latex_delimiters=t[1]),n[0]&512&&(r.sanitize_html=t[9]),n[0]&2048&&(r.render_markdown=t[11]),n[0]&4096&&(r.line_breaks=t[12]),e.$set(r)},i(t){i||(d(e.$$.fragment,t),i=!0)},o(t){k(e.$$.fragment,t),i=!1},d(t){le(e,t)}}}function Ke(l){let e,i,t,n,r=l[4]&&l[42]==1&&Qe(l),o=l[7]&&l[40]&&typeof l[40]=="string"&&We(l);return{c(){e=z("div"),r&&r.c(),i=x(),o&&o.c(),m(e,"class",t="message-buttons-"+(l[42]==0?"user":"bot")+" message-buttons-"+l[16]+" "+(l[8][l[42]]!==null&&"with-avatar")+" svelte-1pjfiar"),C(e,"message-buttons-fit",l[16]==="bubble"&&!l[10]),C(e,"bubble-buttons-user",l[16]==="bubble")},m(s,a){H(s,e,a),r&&r.m(e,null),N(e,i),o&&o.m(e,null),n=!0},p(s,a){s[4]&&s[42]==1?r?(r.p(s,a),a[0]&16&&d(r,1)):(r=Qe(s),r.c(),d(r,1),r.m(e,i)):r&&(V(),k(r,1,1,()=>{r=null}),U()),s[7]&&s[40]&&typeof s[40]=="string"?o?(o.p(s,a),a[0]&129&&d(o,1)):(o=We(s),o.c(),d(o,1),o.m(e,null)):o&&(V(),k(o,1,1,()=>{o=null}),U()),(!n||a[0]&65792&&t!==(t="message-buttons-"+(s[42]==0?"user":"bot")+" message-buttons-"+s[16]+" "+(s[8][s[42]]!==null&&"with-avatar")+" svelte-1pjfiar"))&&m(e,"class",t),(!n||a[0]&66816)&&C(e,"message-buttons-fit",s[16]==="bubble"&&!s[10]),(!n||a[0]&65792)&&C(e,"bubble-buttons-user",s[16]==="bubble")},i(s){n||(d(r),d(o),n=!0)},o(s){k(r),k(o),n=!1},d(s){s&&B(e),r&&r.d(),o&&o.d()}}}function Qe(l){let e,i,t,n;function r(){return l[32](l[39],l[42],l[40])}e=new Ie({props:{action:"like",handle_action:r}});function o(){return l[33](l[39],l[42],l[40])}return t=new Ie({props:{action:"dislike",handle_action:o}}),{c(){ee(e.$$.fragment),i=x(),ee(t.$$.fragment)},m(s,a){te(e,s,a),H(s,i,a),te(t,s,a),n=!0},p(s,a){l=s;const f={};a[0]&1&&(f.handle_action=r),e.$set(f);const u={};a[0]&1&&(u.handle_action=o),t.$set(u)},i(s){n||(d(e.$$.fragment,s),d(t.$$.fragment,s),n=!0)},o(s){k(e.$$.fragment,s),k(t.$$.fragment,s),n=!1},d(s){s&&B(i),le(e,s),le(t,s)}}}function We(l){let e,i;return e=new it({props:{value:l[40]}}),{c(){ee(e.$$.fragment)},m(t,n){te(e,t,n),i=!0},p(t,n){const r={};n[0]&1&&(r.value=t[40]),e.$set(r)},i(t){i||(d(e.$$.fragment,t),i=!0)},o(t){k(e.$$.fragment,t),i=!1},d(t){le(e,t)}}}function Xe(l){let e,i,t=(l[40]!==null||l[2])&&Ge(l);return{c(){t&&t.c(),e=je()},m(n,r){t&&t.m(n,r),H(n,e,r),i=!0},p(n,r){n[40]!==null||n[2]?t?(t.p(n,r),r[0]&5&&d(t,1)):(t=Ge(n),t.c(),d(t,1),t.m(e.parentNode,e)):t&&(V(),k(t,1,1,()=>{t=null}),U())},i(n){i||(d(t),i=!0)},o(n){k(t),i=!1},d(n){n&&B(e),t&&t.d(n)}}}function $e(l){let e,i,t=ue(l[37]),n=[];for(let o=0;o<t.length;o+=1)n[o]=Xe(Oe(l,t,o));const r=o=>k(n[o],1,1,()=>{n[o]=null});return{c(){for(let o=0;o<n.length;o+=1)n[o].c();e=je()},m(o,s){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(o,s);H(o,e,s),i=!0},p(o,s){if(s[0]&1933279){t=ue(o[37]);let a;for(a=0;a<t.length;a+=1){const f=Oe(o,t,a);n[a]?(n[a].p(f,s),d(n[a],1)):(n[a]=Xe(f),n[a].c(),d(n[a],1),n[a].m(e.parentNode,e))}for(V(),a=t.length;a<n.length;a+=1)r(a);U()}},i(o){if(!i){for(let s=0;s<t.length;s+=1)d(n[s]);i=!0}},o(o){n=n.filter(Boolean);for(let s=0;s<n.length;s+=1)k(n[s]);i=!1},d(o){o&&B(e),fl(n,o)}}}function Yt(l){let e,i,t,n,r,o,s,a=l[5]&&l[0]!==null&&l[0].length>0&&Re(l),f=l[0]!==null&&Ye(l);return{c(){a&&a.c(),e=x(),i=z("div"),t=z("div"),f&&f.c(),m(t,"class","message-wrap svelte-1pjfiar"),C(t,"bubble-gap",l[16]==="bubble"),m(i,"class",n=Ze(l[16]==="bubble"?"bubble-wrap":"panel-wrap")+" svelte-1pjfiar"),m(i,"role","log"),m(i,"aria-label","chatbot conversation"),m(i,"aria-live","polite")},m(u,w){a&&a.m(u,w),H(u,e,w),H(u,i,w),N(i,t),f&&f.m(t,null),l[34](i),r=!0,o||(s=Ht(cl.call(null,t)),o=!0)},p(u,w){u[5]&&u[0]!==null&&u[0].length>0?a?(a.p(u,w),w[0]&33&&d(a,1)):(a=Re(u),a.c(),d(a,1),a.m(e.parentNode,e)):a&&(V(),k(a,1,1,()=>{a=null}),U()),u[0]!==null?f?(f.p(u,w),w[0]&1&&d(f,1)):(f=Ye(u),f.c(),d(f,1),f.m(t,null)):f&&(V(),k(f,1,1,()=>{f=null}),U()),(!r||w[0]&65536)&&C(t,"bubble-gap",u[16]==="bubble"),(!r||w[0]&65536&&n!==(n=Ze(u[16]==="bubble"?"bubble-wrap":"panel-wrap")+" svelte-1pjfiar"))&&m(i,"class",n)},i(u){r||(d(a),d(f),r=!0)},o(u){k(a),k(f),r=!1},d(u){u&&(B(e),B(i)),a&&a.d(u),f&&f.d(),l[34](null),o=!1,s()}}}function Gt(l,e,i){let{value:t}=e,n=null,{latex_delimiters:r}=e,{pending_message:o=!1}=e,{selectable:s=!1}=e,{likeable:a=!1}=e,{show_share_button:f=!1}=e,{rtl:u=!1}=e,{show_copy_button:w=!1}=e,{avatar_images:L=[null,null]}=e,{sanitize_html:P=!0}=e,{bubble_full_width:A=!0}=e,{render_markdown:v=!0}=e,{line_breaks:I=!0}=e,{root:Z}=e,{root_url:p}=e,{i18n:F}=e,{layout:q="bubble"}=e,S,O;const R=It();Nt(()=>{O=S&&S.offsetHeight+S.scrollTop>S.scrollHeight-100});const b=()=>{O&&S.scrollTo(0,S.scrollHeight)};Pt(()=>{O&&(b(),S.querySelectorAll("img").forEach(c=>{c.addEventListener("load",()=>{b()})}))});function g(c,T,E){R("select",{index:[c,T],value:E})}function h(c,T,E,ke){R("like",{index:[c,T],value:E,liked:ke})}function Y(c){G.call(this,l,c)}function ae(c){G.call(this,l,c)}function oe(c){G.call(this,l,c)}function re(c){G.call(this,l,c)}function de(c){G.call(this,l,c)}function be(c){G.call(this,l,c)}function he(c){G.call(this,l,c)}function ge(c){G.call(this,l,c)}const we=(c,T,E)=>g(c,T,E),_=(c,T,E,ke)=>{ke.key==="Enter"&&g(c,T,E)},ne=(c,T,E)=>h(c,T,E,!0),ul=(c,T,E)=>h(c,T,E,!1);function _l(c){Mt[c?"unshift":"push"](()=>{S=c,i(17,S)})}return l.$$set=c=>{"value"in c&&i(0,t=c.value),"latex_delimiters"in c&&i(1,r=c.latex_delimiters),"pending_message"in c&&i(2,o=c.pending_message),"selectable"in c&&i(3,s=c.selectable),"likeable"in c&&i(4,a=c.likeable),"show_share_button"in c&&i(5,f=c.show_share_button),"rtl"in c&&i(6,u=c.rtl),"show_copy_button"in c&&i(7,w=c.show_copy_button),"avatar_images"in c&&i(8,L=c.avatar_images),"sanitize_html"in c&&i(9,P=c.sanitize_html),"bubble_full_width"in c&&i(10,A=c.bubble_full_width),"render_markdown"in c&&i(11,v=c.render_markdown),"line_breaks"in c&&i(12,I=c.line_breaks),"root"in c&&i(13,Z=c.root),"root_url"in c&&i(14,p=c.root_url),"i18n"in c&&i(15,F=c.i18n),"layout"in c&&i(16,q=c.layout)},l.$$.update=()=>{l.$$.dirty[0]&2097153&&(bl(t,n)||(i(21,n=t),R("change")))},[t,r,o,s,a,f,u,w,L,P,A,v,I,Z,p,F,q,S,b,g,h,n,Y,ae,oe,re,de,be,he,ge,we,_,ne,ul,_l]}class Jt extends Bt{constructor(e){super(),Lt(this,e,Gt,Yt,Tt,{value:0,latex_delimiters:1,pending_message:2,selectable:3,likeable:4,show_share_button:5,rtl:6,show_copy_button:7,avatar_images:8,sanitize_html:9,bubble_full_width:10,render_markdown:11,line_breaks:12,root:13,root_url:14,i18n:15,layout:16},null,[-1,-1])}}const{SvelteComponent:Kt,append:Qt,assign:Wt,attr:Xt,check_outros:xe,create_component:_e,destroy_component:ce,detach:el,element:$t,get_spread_object:xt,get_spread_update:en,group_outros:ll,init:ln,insert:tl,mount_component:me,safe_not_equal:tn,space:nl,transition_in:D,transition_out:K}=window.__gradio__svelte__internal;function il(l){let e,i;const t=[{autoscroll:l[21].autoscroll},{i18n:l[21].i18n},l[23],{show_progress:l[23].show_progress==="hidden"?"hidden":"minimal"}];let n={};for(let r=0;r<t.length;r+=1)n=Wt(n,t[r]);return e=new wl({props:n}),{c(){_e(e.$$.fragment)},m(r,o){me(e,r,o),i=!0},p(r,o){const s=o[0]&10485760?en(t,[o[0]&2097152&&{autoscroll:r[21].autoscroll},o[0]&2097152&&{i18n:r[21].i18n},o[0]&8388608&&xt(r[23]),o[0]&8388608&&{show_progress:r[23].show_progress==="hidden"?"hidden":"minimal"}]):{};e.$set(s)},i(r){i||(D(e.$$.fragment,r),i=!0)},o(r){K(e.$$.fragment,r),i=!1},d(r){ce(e,r)}}}function al(l){let e,i;return e=new pl({props:{show_label:l[7],Icon:Bl,float:!1,label:l[6]||"Chatbot"}}),{c(){_e(e.$$.fragment)},m(t,n){me(e,t,n),i=!0},p(t,n){const r={};n[0]&128&&(r.show_label=t[7]),n[0]&64&&(r.label=t[6]||"Chatbot"),e.$set(r)},i(t){i||(D(e.$$.fragment,t),i=!0)},o(t){K(e.$$.fragment,t),i=!1},d(t){ce(e,t)}}}function nn(l){let e,i,t,n,r,o=l[23]&&il(l),s=l[7]&&al(l);return n=new Jt({props:{i18n:l[21].i18n,selectable:l[10],likeable:l[11],show_share_button:l[12],value:l[25],latex_delimiters:l[20],render_markdown:l[18],pending_message:l[23]?.status==="pending",rtl:l[13],show_copy_button:l[14],avatar_images:l[22],sanitize_html:l[15],bubble_full_width:l[16],line_breaks:l[19],layout:l[17],root_url:l[9],root:l[8]}}),n.$on("change",l[26]),n.$on("select",l[27]),n.$on("like",l[28]),n.$on("share",l[29]),n.$on("error",l[30]),{c(){o&&o.c(),e=nl(),i=$t("div"),s&&s.c(),t=nl(),_e(n.$$.fragment),Xt(i,"class","wrapper svelte-nab2ao")},m(a,f){o&&o.m(a,f),tl(a,e,f),tl(a,i,f),s&&s.m(i,null),Qt(i,t),me(n,i,null),r=!0},p(a,f){a[23]?o?(o.p(a,f),f[0]&8388608&&D(o,1)):(o=il(a),o.c(),D(o,1),o.m(e.parentNode,e)):o&&(ll(),K(o,1,1,()=>{o=null}),xe()),a[7]?s?(s.p(a,f),f[0]&128&&D(s,1)):(s=al(a),s.c(),D(s,1),s.m(i,t)):s&&(ll(),K(s,1,1,()=>{s=null}),xe());const u={};f[0]&2097152&&(u.i18n=a[21].i18n),f[0]&1024&&(u.selectable=a[10]),f[0]&2048&&(u.likeable=a[11]),f[0]&4096&&(u.show_share_button=a[12]),f[0]&33554432&&(u.value=a[25]),f[0]&1048576&&(u.latex_delimiters=a[20]),f[0]&262144&&(u.render_markdown=a[18]),f[0]&8388608&&(u.pending_message=a[23]?.status==="pending"),f[0]&8192&&(u.rtl=a[13]),f[0]&16384&&(u.show_copy_button=a[14]),f[0]&4194304&&(u.avatar_images=a[22]),f[0]&32768&&(u.sanitize_html=a[15]),f[0]&65536&&(u.bubble_full_width=a[16]),f[0]&524288&&(u.line_breaks=a[19]),f[0]&131072&&(u.layout=a[17]),f[0]&512&&(u.root_url=a[9]),f[0]&256&&(u.root=a[8]),n.$set(u)},i(a){r||(D(o),D(s),D(n.$$.fragment,a),r=!0)},o(a){K(o),K(s),K(n.$$.fragment,a),r=!1},d(a){a&&(el(e),el(i)),o&&o.d(a),s&&s.d(),ce(n)}}}function an(l){let e,i;return e=new ml({props:{elem_id:l[0],elem_classes:l[1],visible:l[2],padding:!1,scale:l[4],min_width:l[5],height:l[24],allow_overflow:!1,$$slots:{default:[nn]},$$scope:{ctx:l}}}),{c(){_e(e.$$.fragment)},m(t,n){me(e,t,n),i=!0},p(t,n){const r={};n[0]&1&&(r.elem_id=t[0]),n[0]&2&&(r.elem_classes=t[1]),n[0]&4&&(r.visible=t[2]),n[0]&16&&(r.scale=t[4]),n[0]&32&&(r.min_width=t[5]),n[0]&16777216&&(r.height=t[24]),n[0]&50331592|n[1]&4&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){i||(D(e.$$.fragment,t),i=!0)},o(t){K(e.$$.fragment,t),i=!1},d(t){ce(e,t)}}}function on(l,e,i){let{elem_id:t=""}=e,{elem_classes:n=[]}=e,{visible:r=!0}=e,{value:o=[]}=e,{scale:s=null}=e,{min_width:a=void 0}=e,{label:f}=e,{show_label:u=!0}=e,{root:w}=e,{root_url:L}=e,{selectable:P=!1}=e,{likeable:A=!1}=e,{show_share_button:v=!1}=e,{rtl:I=!1}=e,{show_copy_button:Z=!1}=e,{sanitize_html:p=!0}=e,{bubble_full_width:F=!0}=e,{layout:q="bubble"}=e,{render_markdown:S=!0}=e,{line_breaks:O=!0}=e,{latex_delimiters:R}=e,{gradio:b}=e,{avatar_images:g=[null,null]}=e,h;const Y=_=>_.replace('src="/file',`src="${w}file`);function ae(_){return _===null?_:{file:dl(_?.file,w,L),alt_text:_?.alt_text}}let{loading_status:oe=void 0}=e,{height:re=400}=e;const de=()=>b.dispatch("change",o),be=_=>b.dispatch("select",_.detail),he=_=>b.dispatch("like",_.detail),ge=_=>b.dispatch("share",_.detail),we=_=>b.dispatch("error",_.detail);return l.$$set=_=>{"elem_id"in _&&i(0,t=_.elem_id),"elem_classes"in _&&i(1,n=_.elem_classes),"visible"in _&&i(2,r=_.visible),"value"in _&&i(3,o=_.value),"scale"in _&&i(4,s=_.scale),"min_width"in _&&i(5,a=_.min_width),"label"in _&&i(6,f=_.label),"show_label"in _&&i(7,u=_.show_label),"root"in _&&i(8,w=_.root),"root_url"in _&&i(9,L=_.root_url),"selectable"in _&&i(10,P=_.selectable),"likeable"in _&&i(11,A=_.likeable),"show_share_button"in _&&i(12,v=_.show_share_button),"rtl"in _&&i(13,I=_.rtl),"show_copy_button"in _&&i(14,Z=_.show_copy_button),"sanitize_html"in _&&i(15,p=_.sanitize_html),"bubble_full_width"in _&&i(16,F=_.bubble_full_width),"layout"in _&&i(17,q=_.layout),"render_markdown"in _&&i(18,S=_.render_markdown),"line_breaks"in _&&i(19,O=_.line_breaks),"latex_delimiters"in _&&i(20,R=_.latex_delimiters),"gradio"in _&&i(21,b=_.gradio),"avatar_images"in _&&i(22,g=_.avatar_images),"loading_status"in _&&i(23,oe=_.loading_status),"height"in _&&i(24,re=_.height)},l.$$.update=()=>{l.$$.dirty[0]&8&&i(25,h=o?o.map(([_,ne])=>[typeof _=="string"?Y(_):ae(_),typeof ne=="string"?Y(ne):ae(ne)]):[])},[t,n,r,o,s,a,f,u,w,L,P,A,v,I,Z,p,F,q,S,O,R,b,g,oe,re,h,de,be,he,ge,we]}class gn extends Kt{constructor(e){super(),ln(this,e,on,an,tn,{elem_id:0,elem_classes:1,visible:2,value:3,scale:4,min_width:5,label:6,show_label:7,root:8,root_url:9,selectable:10,likeable:11,show_share_button:12,rtl:13,show_copy_button:14,sanitize_html:15,bubble_full_width:16,layout:17,render_markdown:18,line_breaks:19,latex_delimiters:20,gradio:21,avatar_images:22,loading_status:23,height:24},null,[-1,-1])}}export{gn as default};
//# sourceMappingURL=Index-a3e61a56.js.map
