import{b as O,n as P}from"./Button-e579bb09.js";import{u as Q}from"./index-9d2dd462.js";const{SvelteComponent:R,append:U,attr:s,binding_callbacks:V,bubble:b,create_slot:W,detach:X,element:D,get_all_dirty_from_scope:Y,get_slot_changes:Z,init:x,insert:$,listen:f,prevent_default:m,run_all:ee,safe_not_equal:ne,space:ie,stop_propagation:y,toggle_class:F,transition_in:le,transition_out:te,update_slot_base:re}=window.__gradio__svelte__internal,{createEventDispatcher:ae,tick:oe,getContext:ue}=window.__gradio__svelte__internal;function de(i){let n,r,a,_,k,g,t,w,p;const z=i[14].default,o=W(z,i,i[13],null);return{c(){n=D("button"),o&&o.c(),r=ie(),a=D("input"),s(a,"type","file"),s(a,"accept",i[0]),a.multiple=_=i[4]==="multiple"||void 0,s(a,"webkitdirectory",k=i[4]==="directory"||void 0),s(a,"mozdirectory",g=i[4]==="directory"||void 0),s(a,"class","svelte-izfbkb"),s(n,"class","svelte-izfbkb"),F(n,"center",i[2]),F(n,"boundedheight",i[1]),F(n,"flex",i[3])},m(l,u){$(l,n,u),o&&o.m(n,null),U(n,r),U(n,a),i[22](a),t=!0,w||(p=[f(a,"change",i[8]),f(n,"drag",y(m(i[15]))),f(n,"dragstart",y(m(i[16]))),f(n,"dragend",y(m(i[17]))),f(n,"dragover",y(m(i[18]))),f(n,"dragenter",y(m(i[19]))),f(n,"dragleave",y(m(i[20]))),f(n,"drop",y(m(i[21]))),f(n,"click",i[7]),f(n,"drop",i[9]),f(n,"dragenter",i[6]),f(n,"dragleave",i[6])],w=!0)},p(l,[u]){o&&o.p&&(!t||u&8192)&&re(o,z,l,l[13],t?Z(z,l[13],u,null):Y(l[13]),null),(!t||u&1)&&s(a,"accept",l[0]),(!t||u&16&&_!==(_=l[4]==="multiple"||void 0))&&(a.multiple=_),(!t||u&16&&k!==(k=l[4]==="directory"||void 0))&&s(a,"webkitdirectory",k),(!t||u&16&&g!==(g=l[4]==="directory"||void 0))&&s(a,"mozdirectory",g),(!t||u&4)&&F(n,"center",l[2]),(!t||u&2)&&F(n,"boundedheight",l[1]),(!t||u&8)&&F(n,"flex",l[3])},i(l){t||(le(o,l),t=!0)},o(l){te(o,l),t=!1},d(l){l&&X(n),o&&o.d(l),i[22](null),w=!1,ee(p)}}}function fe(i,n,r){let{$$slots:a={},$$scope:_}=n;const k=ue("upload_files")??Q;let{filetype:g=null}=n,{dragging:t=!1}=n,{boundedheight:w=!0}=n,{center:p=!0}=n,{flex:z=!0}=n,{file_count:o="single"}=n,{disable_click:l=!1}=n,{root:u}=n,A;const T=ae();function C(){r(10,t=!t)}function q(){l||(r(5,A.value="",A),A.click())}async function B(e){await oe();let h=(Array.isArray(e)?e:[e]).map(c=>c.blob);await k(u,h).then(async c=>{c.error?(Array.isArray(e)?e:[e]).forEach(async(d,v)=>{d.data=await O(d.blob),d.blob=void 0}):(Array.isArray(e)?e:[e]).forEach((d,v)=>{c.files&&(d.orig_name=d.name,d.name=c.files[v],d.is_file=!0,d.blob=void 0,P(d,u,null))})}),T("load",o==="single"?e[0]:e)}async function E(e){let h=Array.from(e);if(e.length){o==="single"&&(h=[e[0]]);var c=[];h.forEach((d,v)=>{c[v]={name:d.name,size:d.size,data:"",blob:d}}),await B(c)}}async function S(e){const h=e.target;h.files&&await E(h.files)}async function j(e){r(10,t=!1),e.dataTransfer?.files&&await E(e.dataTransfer.files)}function G(e){b.call(this,i,e)}function H(e){b.call(this,i,e)}function I(e){b.call(this,i,e)}function J(e){b.call(this,i,e)}function K(e){b.call(this,i,e)}function L(e){b.call(this,i,e)}function M(e){b.call(this,i,e)}function N(e){V[e?"unshift":"push"](()=>{A=e,r(5,A)})}return i.$$set=e=>{"filetype"in e&&r(0,g=e.filetype),"dragging"in e&&r(10,t=e.dragging),"boundedheight"in e&&r(1,w=e.boundedheight),"center"in e&&r(2,p=e.center),"flex"in e&&r(3,z=e.flex),"file_count"in e&&r(4,o=e.file_count),"disable_click"in e&&r(11,l=e.disable_click),"root"in e&&r(12,u=e.root),"$$scope"in e&&r(13,_=e.$$scope)},[g,w,p,z,o,A,C,q,S,j,t,l,u,_,a,G,H,I,J,K,L,M,N]}class _e extends R{constructor(n){super(),x(this,n,fe,de,ne,{filetype:0,dragging:10,boundedheight:1,center:2,flex:3,file_count:4,disable_click:11,root:12})}}export{_e as U};
//# sourceMappingURL=Upload-560a5a61.js.map
