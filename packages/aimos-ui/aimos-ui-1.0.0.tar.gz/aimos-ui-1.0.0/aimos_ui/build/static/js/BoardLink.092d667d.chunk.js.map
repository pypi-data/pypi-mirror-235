{"version":3,"file":"static/js/BoardLink.092d667d.chunk.js","mappings":"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","sources":["pages/Apps/useApp.tsx","../node_modules/@tabler/icons-react/src/icons/IconLayout2.js","../node_modules/@tabler/icons-react/src/icons/IconExternalLink.js","pages/Board/components/VisualizationElements/BoardLinkVizElement.tsx"],"sourcesContent":["import React from 'react';\nimport { useHistory, useLocation } from 'react-router-dom';\nimport * as _ from 'lodash-es';\n\nimport { ANALYTICS_EVENT_KEYS_MAP } from 'config/analytics/analyticsKeysMap';\nimport { PathEnum } from 'config/enums/routesEnum';\n\nimport useBoardStore from 'pages/Board/BoardStore';\n\nimport pyodideEngine, { usePyodideEngine } from 'services/pyodide/store';\nimport * as analytics from 'services/analytics';\n\nfunction useApp() {\n  const history = useHistory();\n  const location = useLocation();\n\n  const isLoading = useBoardStore((state) => state.isLoading);\n  const updateBoard = useBoardStore((state) => state.editBoard);\n  const fetchBoard = useBoardStore((state) => state.fetchBoard);\n  const boards = useBoardStore((state) => state.boards);\n  const notifications = useBoardStore((state) => state.notifyData);\n  const appName = useBoardStore((state) => state.appName);\n  const setAppName = useBoardStore((state) => state.setAppName);\n\n  const allPackagesBoards = usePyodideEngine(pyodideEngine.boardsSelector);\n  const boardsList: string[] = appName\n    ? allPackagesBoards?.[appName] ?? []\n    : [];\n\n  const sortedList = React.useMemo(() => {\n    const list = _.sortBy(boardsList);\n    // Separate directories and files\n    let dirs = list.filter((path) => path.includes('/'));\n    let files = list.filter((path) => !path.includes('/'));\n    // Prioritize directories, then files\n    return [...dirs, ...files];\n  }, [boardsList]);\n\n  React.useEffect(() => {\n    analytics.pageView(ANALYTICS_EVENT_KEYS_MAP.app.pageView);\n  }, []);\n\n  React.useEffect(() => {\n    if (\n      !isLoading &&\n      appName &&\n      sortedList.length > 0 &&\n      location.pathname === PathEnum.App.replace(':appName', appName)\n    ) {\n      const firstBoardPath = sortedList[0]; // replace this with the correct property if different\n      history.replace(\n        `${PathEnum.App.replace(':appName', appName)}/${firstBoardPath}`,\n      );\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [boardsList, location, appName]);\n\n  return {\n    data: sortedList,\n    updateBoard,\n    boards,\n    isLoading,\n    fetchBoard,\n    notifications,\n    appName,\n    setAppName,\n  };\n}\n\nexport default useApp;\n","import createReactComponent from '../createReactComponent';\nexport default createReactComponent('layout-2', 'IconLayout2', [\n  [\n    'path',\n    {\n      d: 'M4 4m0 2a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v1a2 2 0 0 1 -2 2h-2a2 2 0 0 1 -2 -2z',\n      key: 'svg-0',\n    },\n  ],\n  [\n    'path',\n    {\n      d: 'M4 13m0 2a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v3a2 2 0 0 1 -2 2h-2a2 2 0 0 1 -2 -2z',\n      key: 'svg-1',\n    },\n  ],\n  [\n    'path',\n    {\n      d: 'M14 4m0 2a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v3a2 2 0 0 1 -2 2h-2a2 2 0 0 1 -2 -2z',\n      key: 'svg-2',\n    },\n  ],\n  [\n    'path',\n    {\n      d: 'M14 15m0 2a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v1a2 2 0 0 1 -2 2h-2a2 2 0 0 1 -2 -2z',\n      key: 'svg-3',\n    },\n  ],\n]);\n","import createReactComponent from '../createReactComponent';\nexport default createReactComponent('external-link', 'IconExternalLink', [\n  [\n    'path',\n    {\n      d: 'M11 7h-5a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-5',\n      key: 'svg-0',\n    },\n  ],\n  ['path', { d: 'M10 14l10 -10', key: 'svg-1' }],\n  ['path', { d: 'M15 4l5 0l0 5', key: 'svg-2' }],\n]);\n","import * as React from 'react';\n\nimport { IconLayout2, IconExternalLink } from '@tabler/icons-react';\n\nimport { Link, Button, Text } from 'components/kit_v2';\n\nimport { PathEnum } from 'config/enums/routesEnum';\n\nimport useApp from 'pages/Apps/useApp';\n\nfunction BoardLinkVizElement(props: any) {\n  const { data: boardsList, appName } = useApp();\n\n  const url = new URL(window.location.href);\n\n  const isEditMode =\n    url.pathname.startsWith(PathEnum.Apps) && url.pathname.endsWith('/edit');\n\n  const packageName = props.options.package_name;\n  const stateParam = props.options.state_param;\n\n  let externalPackageNameLastIndex = props.data.indexOf(':');\n\n  let externalPackage =\n    externalPackageNameLastIndex === -1\n      ? null\n      : props.data.slice(0, externalPackageNameLastIndex);\n\n  const boardPath = externalPackage\n    ? props.data\n    : packageName && !boardsList.includes(props.data)\n    ? `${packageName}:${props.data}`\n    : props.data;\n\n  return (\n    <Link\n      css={{\n        display: 'flex',\n        color: '$textPrimary',\n        textDecoration: 'underline',\n        textDecorationColor: '$textPrimary50',\n      }}\n      to={`${PathEnum.App.replace(':appName', appName as string)}/${boardPath}${\n        isEditMode ? '/edit' : ''\n      }${stateParam ? '?state=' + stateParam : ''}`}\n      target={props.options.new_tab ? '_blank' : undefined}\n    >\n      <Button\n        leftIcon={<IconLayout2 color='#45484D' />}\n        rightIcon={\n          props.options.new_tab && <IconExternalLink color='#45484D' />\n        }\n        horizontalSpacing='compact'\n        size='md'\n        variant='ghost'\n        color='secondary'\n      >\n        <Text>{props.options.text}</Text>\n      </Button>\n    </Link>\n  );\n}\nexport default BoardLinkVizElement;\n"],"names":["_allPackagesBoards$ap","history","useHistory","location","useLocation","isLoading","useBoardStore","state","updateBoard","editBoard","fetchBoard","boards","notifications","notifyData","appName","setAppName","allPackagesBoards","usePyodideEngine","pyodideEngine","boardsSelector","boardsList","sortedList","React","list","_","dirs","filter","path","includes","files","concat","_toConsumableArray","analytics","ANALYTICS_EVENT_KEYS_MAP","app","pageView","length","pathname","PathEnum","App","replace","firstBoardPath","data","IconLayout2","createReactComponent","d","key","IconExternalLink","props","_useApp","useApp","url","URL","window","href","isEditMode","startsWith","Apps","endsWith","packageName","options","package_name","stateParam","state_param","externalPackageNameLastIndex","indexOf","boardPath","slice","_jsx","Link","css","display","color","textDecoration","textDecorationColor","to","target","new_tab","undefined","children","Button","leftIcon","rightIcon","horizontalSpacing","size","variant","Text","text"],"sourceRoot":""}