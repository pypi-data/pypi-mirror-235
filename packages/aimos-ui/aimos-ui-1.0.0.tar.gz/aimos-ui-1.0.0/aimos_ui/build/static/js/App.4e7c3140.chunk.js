"use strict";(self.webpackChunkui=self.webpackChunkui||[]).push([[4768],{33472:function(e,t,a){a.r(t),a.d(t,{default:function(){return k}});var n=a(1413),o=a(72791),c=a(67571),r=a(39664),i=a(57678),p=a(55779),s=a(75616),d=a(29439),u=a(55191),l=a(87314),h=a(5377),f=a(16729),x=a(19741),m=a(47956),v=(0,m.zo)("div",{height:"100vh",width:"100%",overflow:"hidden",".ant-tree-node-content-wrapper":{position:"unset !important"}}),g=(0,m.zo)(i.xu,{flex:1,width:"calc(100% - 200px)"}),y=(0,m.zo)(x.OL,{display:"flex",padding:"0 $4",ai:"center",color:"unset",textDecoration:"none",borderRadius:"$3","&:after":{position:"absolute",content:'""',display:"block",width:"187px",height:"28px",left:"0"}}),j=a(78946),A=(0,a(7469).Z)("brand-python","IconBrandPython",[["path",{d:"M12 9h-7a2 2 0 0 0 -2 2v4a2 2 0 0 0 2 2h3",key:"svg-0"}],["path",{d:"M12 15h7a2 2 0 0 0 2 -2v-4a2 2 0 0 0 -2 -2h-3",key:"svg-1"}],["path",{d:"M8 9v-4a2 2 0 0 1 2 -2h4a2 2 0 0 1 2 2v5a2 2 0 0 1 -2 2h-4a2 2 0 0 0 -2 2v5a2 2 0 0 0 2 2h4a2 2 0 0 0 2 -2v-4",key:"svg-2"}],["path",{d:"M11 6l0 .01",key:"svg-3"}],["path",{d:"M13 18l0 .01",key:"svg-4"}]]),b=a(80184),Z=function(e){var t=e.boards,a=e.editMode,r=e.appName,s=(0,c.TH)(),u=o.useRef(null),l=o.useState(0),h=(0,d.Z)(l,2),f=h[0],x=h[1],m=o.useMemo((function(){for(var e=[],o=[],c=[],d={},u=0;u<t.length;u++)for(var l="".concat(p.A.App.replace(":appName",r),"/").concat(t[u]),h=s.pathname.replace("/edit","")===l,f=t[u].split("/"),x=0;x<f.length;x++){var m=x===f.length-1,v=f.slice(0,x+1).join("/");if(h&&(o.push("".concat(u,"-").concat(x)),m&&c.push("".concat(u,"-").concat(x))),!d[v]){var g=(0,n.Z)({title:m?(0,b.jsxs)(y,{to:"".concat(l).concat(a?"/edit":""),children:[(0,b.jsx)(i.JO,{size:"md",icon:(0,b.jsx)(A,{})}),(0,b.jsx)(i.xv,{css:{ml:"$4"},children:f[x]})]},f[x]):(0,b.jsx)(i.xv,{children:f[x]}),value:f[x],key:"".concat(u,"-").concat(x)},!m&&{children:[]});d[v]=g}}for(var j in d){var Z,N=d[j];if(-1!==j.indexOf("/"))null===(Z=d[j.substring(0,j.lastIndexOf("/"))].children)||void 0===Z||Z.push(N);else e.push(N)}return{tree:e,expandedKeys:o,selectedKeys:c}}),[t,a,s.pathname]),v=o.useCallback((function(e){x(e[0].contentRect.height)}),[]);return(0,j.yU)(v,u),(0,b.jsx)(i.xu,{ref:u,width:200,css:{borderRight:"1px solid $border30",backgroundColor:"#fff",p:"$3 $4"},children:(0,b.jsx)(i.mp,{height:f,selectedKeys:m.selectedKeys,expandedKeys:m.expandedKeys,data:m.tree})})};var N=function(e){var t=e.boardPath,a=e.editMode,n=e.boardList,c=e.stateStr,r=e.appName,s=null===t||void 0===t?void 0:t.replace("/edit",""),d=(0,f.Z)((function(e){var t;return null===(t=e.boards)||void 0===t?void 0:t["".concat(r,":").concat(s)]})),x=(0,f.Z)((function(e){return e.fetchBoard}));o.useEffect((function(){t&&!d&&x(s,r)}),[t]);var m=o.useMemo((function(){var e=s.split("/"),t=[{name:"Apps",path:p.A.Apps},{name:r,path:p.A.App.replace(":appName",r)},{name:e.map((function(t,n){var o=n===e.length-1;return(0,b.jsx)(i.xv,{color:a?"$textPrimary50":"$textPrimary",size:"$3",css:{mx:"$2"},children:o?t.slice(0,t.length-3):"".concat(t," /")},n)})),path:"".concat(p.A.App.replace(":appName",r),"/").concat(s)}];return a&&t.push({name:"Edit",path:"".concat(p.A.App.replace(":appName",r),"/").concat(s,"/edit")}),t}),[a,s]),y=s.indexOf(":"),j=-1===y?null:s.slice(0,y);return(0,b.jsxs)(v,{children:[(0,b.jsxs)(l.Du,{id:"app-top-bar",children:[(0,b.jsx)(i.xu,{flex:"1 100%",children:(0,b.jsx)(i.aG,{items:m})}),d&&!a&&(0,b.jsx)(i.rU,{css:{display:"flex"},to:"".concat(p.A.App.replace(":appName",r),"/").concat(t,"/edit").concat(c?"?state="+encodeURIComponent(c):""),underline:!1,children:(0,b.jsx)(i.zx,{variant:"outlined",size:"xs",rightIcon:(0,b.jsx)(u.Z,{}),children:"Playground"})})]}),(0,b.jsxs)(i.xu,{display:"flex",height:"calc(100% - 28px)",children:[(0,b.jsx)(Z,{boards:n,editMode:a,appName:r}),(0,b.jsx)(g,{children:d&&(0,b.jsx)(h.Z,{data:d,editMode:a,stateStr:c,externalPackage:j},d.path+a)})]})]})};var w=function(e){var t,a=e.match,n=e.location,c=e.history,r=e.data,i=e.appName,p="";null!==a&&void 0!==a&&null!==(t=a.params)&&void 0!==t&&t[0]&&(p=a.params[0]);var s=n.pathname.endsWith("/edit"),u=o.useCallback((function(){var e=new URLSearchParams(window.location.search).get("state");return e?decodeURIComponent(e):""}),[]),l=o.useState(u()),h=(0,d.Z)(l,2),f=h[0],x=h[1],m=o.useCallback((function(){x(u())}),[]);return o.useEffect((function(){p&&(document.title="".concat(p," | Aim")),m()}),[p]),o.useEffect((function(){!function(e){var t=e.pushState;e.pushState=function(a){return"function"==typeof e.onpushstate&&e.onpushstate({state:a}),t.apply(e,arguments)}}(window.history),window.onpopstate=c.onpushstate=m}),[]),(0,b.jsx)(N,{appName:i,boardList:r,boardPath:p,editMode:s,stateStr:f})};var k=function(){var e=(0,s.Z)(),t=e.data,a=e.isLoading,d=e.notifications,u=e.setAppName,l=(0,c.$B)().params.appName;return o.useEffect((function(){u(l)}),[l]),(0,b.jsxs)(r.Z,{children:[a?null:(0,b.jsx)(c.AW,{path:["".concat(p.A.App.replace(":appName",l),"/*"),"".concat(p.A.App.replace(":appName",l),"/*/edit")],exact:!0,children:function(e){return(0,b.jsx)(w,(0,n.Z)((0,n.Z)({},e),{},{data:t,appName:l}),e.location.pathname)}}),(0,b.jsx)(i.VW,{placement:"bottomRight",swipeDirection:"right",duration:5e3,children:d.map((function(e){return(0,b.jsx)(i.FN,(0,n.Z)({onOpenChange:function(t){!t&&e.onDelete&&e.onDelete(e.id)}},e),e.id)}))})]})}},75616:function(e,t,a){var n=a(93433),o=a(72791),c=a(67571),r=a(94266),i=a(43403),p=a(55779),s=a(16729),d=a(7779),u=a(49379);t.Z=function(){var e,t=(0,c.k6)(),a=(0,c.TH)(),l=(0,s.Z)((function(e){return e.isLoading})),h=(0,s.Z)((function(e){return e.editBoard})),f=(0,s.Z)((function(e){return e.fetchBoard})),x=(0,s.Z)((function(e){return e.boards})),m=(0,s.Z)((function(e){return e.notifyData})),v=(0,s.Z)((function(e){return e.appName})),g=(0,s.Z)((function(e){return e.setAppName})),y=(0,d.w)(d.Z.boardsSelector),j=v&&null!==(e=null===y||void 0===y?void 0:y[v])&&void 0!==e?e:[],A=o.useMemo((function(){var e=r.Z(j),t=e.filter((function(e){return e.includes("/")})),a=e.filter((function(e){return!e.includes("/")}));return[].concat((0,n.Z)(t),(0,n.Z)(a))}),[j]);return o.useEffect((function(){u.t(i.q.app.pageView)}),[]),o.useEffect((function(){if(!l&&v&&A.length>0&&a.pathname===p.A.App.replace(":appName",v)){var e=A[0];t.replace("".concat(p.A.App.replace(":appName",v),"/").concat(e))}}),[j,a,v]),{data:A,updateBoard:h,boards:x,isLoading:l,fetchBoard:f,notifications:m,appName:v,setAppName:g}}}}]);
//# sourceMappingURL=App.4e7c3140.chunk.js.map