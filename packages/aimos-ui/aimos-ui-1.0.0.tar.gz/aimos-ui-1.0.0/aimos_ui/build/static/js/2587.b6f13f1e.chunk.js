"use strict";(self.webpackChunkui=self.webpackChunkui||[]).push([[2587],{12381:function(e,n){n.Z=["none","5 5","10 5 5 5","10 5 5 5 5 5","10 5 5 5 5 5 5 5","20 5 10 5","20 5 10 5 10 5","20 5 10 5 10 5 5 5","20 5 10 5 5 5 5 5"]},28398:function(e,n,t){t.d(n,{W:function(){return S},Z:function(){return y}});var i=t(72791),o=t(81694),l=t.n(o),r=t(75566),s=t(30159),a=t(42334),c=t(16551),d=t(1413),u=t(29439),p=t(44849),v=t(80810),f=t(5193),h=t(17447),m=t(95799),x=t(34005),g=t(54585),_=t(80184);function j(e){var n=e.visualizationName,t=e.engine,o=t.useStore,l=t.visualizations,r=t.pipeline,a=l[n].controls,j=o(a.tooltip.stateSelector),Z=a.tooltip.methods.update,b=o(r.additionalDataSelector),N=i.useState(""),y=(0,u.Z)(N,2),z=y[0],C=y[1],P=i.useMemo((function(){var e;return(null!==(e=null===b||void 0===b?void 0:b.modifiers)&&void 0!==e?e:[]).map((function(e){return{label:e,value:e,group:e.slice(0,e.indexOf("."))}}))}),[null===b||void 0===b?void 0:b.modifiers]),T=i.useMemo((function(){return z?null===P||void 0===P?void 0:P.filter((function(e){return-1!==e.label.indexOf(z)})):P}),[P,z]),O=i.useCallback((function(e){Z({selectedFields:e.map((function(e){return e.value}))})}),[Z]),E=i.useCallback((function(e,n){"Backspace"===(null===e||void 0===e?void 0:e.code)&&z.length||O(n)}),[z.length,O]),L=i.useCallback((function(e){e.stopPropagation(),C(e.target.value)}),[C]),B=i.useCallback((function(){Z({display:!j.display})}),[Z,j.display]),k=i.useCallback((function(e){Z({appearance:e.value})}),[Z]),F=i.useMemo((function(){return Object.values(S).map((function(e){return{label:p.Z.capitalize(e),value:e}}))}),[]),w=i.useMemo((function(){var e=[];return P.forEach((function(n){-1!==j.selectedFields.indexOf(n.value)&&e.push(n)})),e.sort((function(e,n){return j.selectedFields.indexOf(e.value)-j.selectedFields.indexOf(n.value)}))}),[P,j.selectedFields]);return(0,_.jsx)(s.Z,{children:(0,_.jsxs)("div",{className:"TooltipPopover",children:[(0,_.jsxs)("div",{className:"TooltipPopover__section",children:[(0,_.jsx)(c.xv,{component:"h4",tint:50,className:"TooltipPopover__subtitle",children:"Select Fields To Display In The Tooltip"}),(0,_.jsx)(m.ZP,{id:"select-params",size:"small",openOnFocus:!0,multiple:!0,disableCloseOnSelect:!0,options:T,value:w,onChange:E,groupBy:function(e){return e.group},getOptionLabel:function(e){return e.label},getOptionSelected:function(e,n){return e.value===n.value},renderInput:function(e){return(0,_.jsx)(v.Z,(0,d.Z)((0,d.Z)({},e),{},{inputProps:(0,d.Z)((0,d.Z)({},e.inputProps),{},{value:z,onChange:L}),className:"TextField__OutLined__Small",variant:"outlined",placeholder:"Select Fields"}))},renderOption:function(e,n){var t=n.selected;return(0,_.jsxs)("div",{className:"TooltipPopover__option",children:[(0,_.jsx)(f.Z,{color:"primary",size:"small",icon:(0,_.jsx)(x.Z,{}),checkedIcon:(0,_.jsx)(g.Z,{}),style:{marginRight:4},checked:t}),(0,_.jsx)(c.xv,{className:"GroupingPopover__option__label",size:14,children:e.label})]})},renderTags:function(e,n){return(0,_.jsx)("div",{className:"TooltipPopover__SelectedTagsContainer",children:e.map((function(e,t){return(0,_.jsx)(c.Ct,(0,d.Z)((0,d.Z)({},n({index:t})),{},{label:e.label,size:"small",className:"Select__Chip"}),t)}))})}})]}),(0,_.jsx)(h.Z,{className:"TooltipPopover__divider"}),(0,_.jsxs)("div",{className:"TooltipPopover__section",children:[(0,_.jsx)(c.xv,{component:"h4",tint:50,className:"TooltipPopover__subtitle",children:"Tooltip Visibility On Hover"}),(0,_.jsx)(c.CO,{title:"Select Visibility",id:"display",value:j.display?"Show":"Hide",leftLabel:"Hide",rightLabel:"Show",leftValue:"Hide",rightValue:"Show",onChange:B})]}),(0,_.jsx)(h.Z,{className:"TooltipPopover__divider"}),(0,_.jsxs)("div",{className:"TooltipPopover__section",children:[(0,_.jsx)(c.xv,{component:"h4",tint:50,className:"TooltipPopover__subtitle",children:"Tooltip Appearance"}),(0,_.jsx)(c.Fj,{selectOptions:F,selected:j.appearance,handleSelect:k})]})]})})}j.displayName="ConfigureTooltipPopover";var Z=i.memo(j);function b(e){var n=e.engine,t=e.visualizationName,i=e.engine,o=(0,i.useStore)(i.visualizations[t].controls.tooltip.stateSelector);return(0,_.jsx)(s.Z,{children:(0,_.jsx)(a.Z,{title:"Display in tooltip",anchorOrigin:{vertical:"bottom",horizontal:"right"},anchor:function(e){var n=e.onAnchorClick,t=e.opened;return(0,_.jsx)(r.ZP,{title:"Tooltip fields",children:(0,_.jsxs)("div",{className:l()("Control__anchor",{active:!o.isInitial,outlined:!o.isInitial}),onClick:n,children:[(0,_.jsx)(c.JO,{name:"cursor",className:l()("Control__anchor__icon",{active:!o.isInitial})}),(0,_.jsx)(c.xv,{className:"Control__anchor__label",children:"Configure tooltip"}),(0,_.jsx)(c.JO,{name:"arrow-down-contained",className:l()("Control__anchor__arrow",{opened:t}),fontSize:6})]})})},component:(0,_.jsx)(Z,{engine:n,visualizationName:t})})})}b.displayName="ConfigureTooltip";var N=i.memo(b),S=function(e){return e.Top="top",e.Auto="auto",e.Bottom="bottom",e}({}),y=N},19991:function(e,n,t){t.d(n,{Z:function(){return u}});var i=t(72791),o=t(81694),l=t.n(o),r=t(75566),s=t(30159),a=t(16551),c=t(80184);function d(e){var n=e.visualizationName,t=e.engine,o=t.useStore,d=t.visualizations,u=t.groupings,p=d[n],v=o(u.isEmptySelector),f=o(p.controls.legends.stateSelector),h=p.controls.legends.methods.update;return i.useEffect((function(){v&&f.display&&h({display:!1})}),[v,f.display,h]),(0,c.jsx)(s.Z,{children:(0,c.jsx)(r.ZP,{title:f.display?"Hide legends":"Display legends",children:(0,c.jsx)("div",{children:(0,c.jsxs)(a.zx,{size:"xSmall",className:l()("Control__anchor",{active:f.display,outlined:f.isInitial,disabled:v}),onClick:function(){v||h({display:!f.display})},children:[(0,c.jsx)(a.JO,{name:"chart-legends",className:l()("Control__anchor__icon",{active:f.display})}),(0,c.jsx)(a.xv,{className:"Control__anchor__label",children:"Legends"})]})})})})}d.displayName="Legends";var u=i.memo(d)},74099:function(e,n,t){t.d(n,{u:function(){return X},d:function(){return G}});var i=t(29439),o=t(72791),l=t(44849),r=t(30159),s=t(4942),a=t(81694),c=t.n(a),d=t(95269),u=t(28398);var p=function(e,n,t,i,o){if(!t||!n)return{top:e.top,left:e.left};var l,r,s=10;if(i){var a=e.right-e.left,c=e.right-a/2;if(l=c-n.width/2-s<t.left?e.right-(e.right-t.left)+s:c+n.width/2>t.right?e.left-n.width+(t.right-e.left):c-n.width/2,o===u.W.Top)r=t.top-(n.height-30);else{var d,p=null!==(d=document.body.getBoundingClientRect().bottom)&&void 0!==d?d:0,v=t.bottom-30;r=p<t.bottom+n.height-40?p-n.height-s:v}}else l=e.left<t.left?(e.right<t.left?t.left:e.right)+s:e.right+20+n.width>=t.right?e.left-n.width-s:e.right+s,r=e.top<t.top?t.top+s:e.top+n.height>t.bottom?t.bottom-n.height-s:e.top+s;return{left:l,top:r}},v=t(80184);function f(e){var n,t=e.id,a=void 0===t?"tooltip":t,f=e.forceOpen,h=void 0!==f&&f,m=e.open,x=void 0!==m&&m,g=e.className,_=void 0===g?"":g,j=e.containerNode,Z=void 0===j?document.body:j,b=e.tooltipAppearance,N=void 0===b?u.W.Auto:b,S=e.elementRect,y=e.children;x=h||x;var z=o.useState(!!S&&x),C=(0,i.Z)(z,2),P=C[0],T=C[1],O=o.useState(),E=(0,i.Z)(O,2),L=E[0],B=E[1],k=o.useState({top:1e4,left:1e4}),F=(0,i.Z)(k,2),w=F[0],A=F[1],R=o.useMemo((function(){return N===u.W.Top||N===u.W.Bottom}),[N]),V=o.useCallback((function(e){if(e&&L&&Z){var n=L.getBoundingClientRect(),t=Z.getBoundingClientRect();if(t.width&&t.height){var i={top:e.top-Z.scrollTop,left:e.left-Z.scrollLeft,right:e.right-Z.scrollLeft,bottom:e.bottom-Z.scrollTop},o=p(i,n,t,R,N);A(o)}}}),[Z,L,R,N]);return o.useEffect((function(){T(!!S&&x)}),[S,x]),o.useEffect((function(){S&&P&&V(S)}),[S,P,h,V]),o.useEffect((function(){if(Z){var e=l.Z.debounce((function(){return T(!!S&&x)}),200),n=l.Z.debounce((function(){return T(!1)}),100,{leading:!0,trailing:!1});return Z.addEventListener("scroll",n),Z.addEventListener("scroll",e),function(){null===Z||void 0===Z||Z.removeEventListener("scroll",n),null===Z||void 0===Z||Z.removeEventListener("scroll",e)}}}),[S,x,Z]),o.useEffect((function(){var e=function(e){var n=e.target;h||null!==Z&&void 0!==Z&&Z.contains(n)||null!==L&&void 0!==L&&L.contains(n)||T(!1)};return document.addEventListener("mousemove",e),function(){document.removeEventListener("mousemove",e)}}),[Z,L,h]),(0,v.jsx)(r.Z,{children:(0,v.jsx)(d.ZP,{id:a,open:P,disableEnforceFocus:!0,disableAutoFocus:!0,disableRestoreFocus:!0,disablePortal:!0,disableScrollLock:!0,anchorReference:"anchorPosition",anchorPosition:w,className:c()("VisualizationTooltip",(n={},(0,s.Z)(n,_,_),(0,s.Z)(n,"pinnedPopover",R),n)),transitionDuration:{appear:0,enter:50,exit:100},TransitionProps:{onEnter:function(e){return B(e)}},transformOrigin:{vertical:"top",horizontal:"left"},classes:{paper:c()("VisualizationTooltip__content",{VisualizationTooltip__content__active:h,VisualizationTooltip__content__pinned:R,VisualizationTooltip__content__hide:!w})},children:(0,v.jsx)(r.Z,{children:y})},"popover-".concat(N))})}var h=o.memo(f),m=t(89526),x=t(17447),g=o.forwardRef((function(e,n){var t=e.tooltipAppearance,i=void 0===t?u.W.Auto:t,l=e.focused,s=void 0!==l&&l,a=e.onChangeTooltip,c=e.selectedProps,d=e.selectedGroupingProps,p=e.renderHeader,f=o.useMemo((function(){return i===u.W.Top||i===u.W.Bottom}),[i]),h=o.useCallback((function(e){a({appearance:e})}),[a]);return(0,v.jsx)(r.Z,{children:(0,v.jsxs)(m.Z,{ref:n,className:"TooltipContent",style:{pointerEvents:s?"auto":"none"},elevation:0,children:[s&&(0,v.jsx)(N,{appearance:i,onChangeAppearance:h}),(0,v.jsx)("div",{className:"TooltipContent__container",children:f?(0,v.jsxs)("div",{className:"PinnedSection",children:[(0,v.jsx)("div",{className:"ScrollBar__hidden",children:p&&p()}),(0,v.jsx)(x.Z,{orientation:"vertical"}),(0,v.jsxs)("div",{className:"ScrollBar__hidden",children:[(0,v.jsx)(P,{fields:c,isPopoverPinned:f}),(0,v.jsx)(L,{fields:d})]})]}):(0,v.jsxs)("div",{className:"UnpinnedSection ScrollBar__hidden",children:[p&&p(),(0,v.jsx)(P,{fields:c,isPopoverPinned:f}),(0,v.jsx)(L,{fields:d})]})})]})})})),_=o.memo(g),j=t(75566),Z=t(16551);function b(e){var n=e.onChangeAppearance,t=e.appearance;return(0,v.jsx)(r.Z,{children:(0,v.jsxs)("div",{className:"ActionButtons",children:[(0,v.jsx)(j.ZP,{title:"Pin to top",children:(0,v.jsx)("div",{children:(0,v.jsx)(Z.zx,{onClick:function(){return n(u.W.Top)},withOnlyIcon:!0,size:"xSmall",className:c()("ActionButtons__actionButton",{active:t===u.W.Top}),children:(0,v.jsx)(Z.JO,{name:"pin-to-top",fontSize:16,className:"ActionButtons__actionButton__icon"})})})}),(0,v.jsx)(j.ZP,{title:"Flexible",children:(0,v.jsx)("div",{children:(0,v.jsx)(Z.zx,{onClick:function(){return n(u.W.Auto)},withOnlyIcon:!0,size:"xSmall",className:c()("ActionButtons__actionButton",{active:t===u.W.Auto}),children:(0,v.jsx)(Z.JO,{name:"flexible",fontSize:16,className:"ActionButtons__actionButton__icon"})})})}),(0,v.jsx)(j.ZP,{title:"Pin to bottom",children:(0,v.jsx)("div",{children:(0,v.jsx)(Z.zx,{onClick:function(){return n(u.W.Bottom)},withOnlyIcon:!0,size:"xSmall",className:c()("ActionButtons__actionButton",{active:t===u.W.Bottom}),children:(0,v.jsx)(Z.JO,{name:"pin-to-bottom",fontSize:16,className:"ActionButtons__actionButton__icon"})})})})]})})}var N=o.memo(b),S=(t(85079),t(39664));t(68255),t(55779),t(20124);var y=t(1413);var z=t(81079);function C(e){var n=e.fields,t=void 0===n?{}:n,i=e.isPopoverPinned,o=void 0!==i&&i;return l.Z.isEmpty(t)?null:(0,v.jsx)(r.Z,{children:(0,v.jsxs)("div",{className:"SelectedFields",children:[o?null:(0,v.jsx)(x.Z,{orientation:"horizontal"}),(0,v.jsxs)("div",{className:"SelectedFields__container",children:[(0,v.jsx)(Z.xv,{weight:500,tint:50,children:"SELECTED FIELDS"}),Object.keys(t).map((function(e){return(0,v.jsxs)("div",{className:"SelectedFields__container__value",children:[(0,v.jsx)(Z.xv,{tint:50,children:"".concat(e,": ")}),(0,v.jsx)(Z.xv,{children:(0,z.B)(t[e])})]},e)}))]})]})})}var P=o.memo(C),T=t(10283),O=t(93618);function E(e){var n=e.fields,t=void 0===n?{}:n;return l.Z.isEmpty(t)?null:(0,v.jsx)(r.Z,{children:(0,v.jsxs)("div",{className:"SelectedGroupingFields",children:[(0,v.jsx)(x.Z,{orientation:"horizontal"}),(0,v.jsxs)("div",{className:"SelectedGroupingFields__container",children:[(0,v.jsx)(Z.xv,{tint:50,weight:500,children:"GROUP CONFIG"}),Object.keys(t).map((function(e){return l.Z.isEmpty(t[e])?null:(0,v.jsxs)(o.Fragment,{children:[(0,v.jsx)(Z.xv,{component:"p",weight:600,className:"SelectedGroupingFields__container__groupKey",children:e}),Object.keys(t[e]).map((function(n){var i=t[e][n];return i=(0,T.Q)(i)?(0,O.b)(i):i,(0,v.jsxs)("div",{children:[(0,v.jsx)(Z.xv,{size:12,tint:50,children:"".concat(n,": ")}),(0,v.jsx)(Z.xv,{size:12,className:"SelectedGroupingFields__container__value",children:(0,z.B)(i)})]},n)}))]},e)}))]})]})})}var L=o.memo(E),B=_,k=t(37762),F=t(72426),w=t.n(F),A=t(93482),R=t(76531);var V=function(e,n,t,o){var r={selectedProps:{},selectedGroupingProps:{}};if(e){r.run=e.run;var s,a=(0,k.Z)(n.selectedFields);try{for(a.s();!(s=a.n()).done;){var c=s.value,d=(0,R.NA)(e,c);-1!==["run.creation_time","run.end_time"].indexOf(c)?r.selectedProps[c]=l.Z.isNil(d)?d:w()(1e3*d).format(A.lh):r.selectedProps[c]=d}}catch(m){a.e(m)}finally{a.f()}if(e.groups)for(var u=0,p=Object.entries(e.groups);u<p.length;u++){var v=(0,i.Z)(p[u],2),f=v[0],h=t[v[1][0]];h&&(r.selectedGroupingProps[f]=h.fields)}"function"===typeof o&&(r.renderHeader=o)}return r};function W(e){var n=e.tooltipContentHeader,t=e.boxContainer,s=e.engine,a=e.engine,c=a.useStore,d=a.pipeline,u=e.visualizationName,p=e.appContainerNode,f=s.visualizations[u].controls,m=c(d.dataSelector),x=c(d.foundGroupsSelector),g=c(s.focusedState.stateSelector),_=c(s.activeElement.stateSelector),j=c(f.tooltip.stateSelector),Z=f.tooltip.methods.update,b=c(f.zoom.stateSelector),N=c(f.axesProperties.stateSelector),S=m.find((function(e){return e.key===_.key})),y=o.useState(!1),z=(0,i.Z)(y,2),C=z[0],P=z[1],T=V(S,j,x,(function(){return n?(0,v.jsx)(n,{name:S.data.name,context:S.data.context,yValue:_.yValue,xValue:_.xValue,alignment:null===N||void 0===N?void 0:N.alignment}):void 0})),O=o.useMemo((function(){return!(null!==b&&void 0!==b&&b.active)&&(null===j||void 0===j?void 0:j.display)}),[null===b||void 0===b?void 0:b.active,null===j||void 0===j?void 0:j.display]);o.useEffect((function(){P(O)}),[O]),o.useEffect((function(){if(p){var e=l.Z.debounce((function(){return P(O)}),200),n=l.Z.debounce((function(){return P(!1)}),100,{leading:!0,trailing:!1});return p.addEventListener("scroll",n),p.addEventListener("scroll",e),function(){null===p||void 0===p||p.removeEventListener("scroll",n),null===p||void 0===p||p.removeEventListener("scroll",e)}}}),[p,O]);var E=o.useMemo((function(){return t.current.getBoundingClientRect()}),[t.current]),L=_.rect?{top:E.top+_.rect.top,left:E.left+_.rect.left,right:E.left+_.rect.right,bottom:E.top+_.rect.bottom}:null;return(0,v.jsx)(r.Z,{children:(0,v.jsx)(h,{containerNode:t.current,elementRect:L,open:C,forceOpen:g.active,tooltipAppearance:null===j||void 0===j?void 0:j.appearance,children:(0,v.jsx)(B,{onChangeTooltip:Z,tooltipAppearance:null===j||void 0===j?void 0:j.appearance,focused:g.active,run:T.run,selectedProps:T.selectedProps,selectedGroupingProps:T.selectedGroupingProps,renderHeader:T.renderHeader})},u+"-visualizerTooltip")})}W.displayName="VisualizerTooltip";var G=o.memo(W),H=t(78946),I=t(97901);function M(e){var n=e.data,t=void 0===n?{}:n,i=e.mode,r=void 0===i?I.un.PINNED:i,a=e.readOnly,d=void 0!==a&&a,u=o.useRef({}),p=o.useRef(null);return o.useEffect((function(){p.current&&!l.Z.isEqual(u.current,t)&&(u.current=t,(0,I.il)({data:t,containerNode:p.current,readOnly:d}))}),[t,d]),(0,v.jsx)(S.Z,{children:(0,v.jsx)("div",{className:c()("VisualizationLegends",(0,s.Z)({},r,!0)),children:(0,v.jsx)("div",{ref:p,className:"VisualizationLegends__container"})})})}M.displayName="VisualizationLegends";var D=o.memo(M),J=t(16386),U=t(12133),K=t(24608),Y=t(12381),q=t(16919);function Q(e){var n=e.vizContainer,t=e.boxContainer,r=e.engine,a=e.engine,c=a.useStore,d=a.pipeline,u=e.visualizationName,p=r.visualizations[u],f=c(p.controls.legends.stateSelector),h=p.controls.legends.methods.update,m=c(d.foundGroupsSelector),x=o.useState({width:200,maxHeight:n.current.offsetHeight,maxWidth:n.current.offsetWidth}),g=(0,i.Z)(x,2),_=g[0],j=g[1],Z=function(e){var n,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=K.ZP[0];return(n={},(0,s.Z)(n,q.YT.COLOR,{color:i[t%i.length]}),(0,s.Z)(n,q.YT.STROKE,{dasharray:Y.Z[t%Y.Z.length]}),n)[e]||{}},b=o.useMemo((function(){for(var e={},n=0,t=Object.values(m);n<t.length;n++){var o=t[n],l=o.type,r=o.fields,s=o.order;e[l]||(e[l]={});for(var a=0,c=Object.entries(r);a<c.length;a++){var d=c[a],u=(0,i.Z)(d,2),p=u[0],v=u[1],f=(0,y.Z)({value:(0,z.B)(v,"--"),order:s},Z(l,s));e[l][p]?e[l][p].push(f):e[l][p]=[f]}for(var h=0,x=Object.values(e[l]);h<x.length;h++){x[h].sort((function(e,n){return(e.order||0)-(n.order||0)}))}}return e}),[m]),N=o.useMemo((function(){return!(null===f||void 0===f||!f.display)&&!l.Z.isEmpty(b)}),[null===f||void 0===f?void 0:f.display,b]),S=o.useCallback((function(e,n){var i;(null===(i=e.current)||void 0===i?void 0:i.offsetWidth)===n&&h({display:!1}),t.current.classList.remove("ScrollBar__hidden")}),[t,h]),C=o.useCallback((function(){t.current.classList.add("ScrollBar__hidden")}),[t]),P=o.useCallback((function(e){null!==e&&void 0!==e&&e.length&&j((function(n){return(0,y.Z)((0,y.Z)({},n),{},{maxHeight:e[0].contentRect.height,maxWidth:e[0].contentRect.width})}))}),[]);return(0,H.yU)(P,n),N?(0,v.jsx)("div",{className:"VisualizerLegends",children:(0,v.jsx)(J.ZP,{id:"".concat(u,"-Legends-ResizeElement"),side:J.HM.LEFT,snapOffset:80,useLocalStorage:!0,initialSizes:_,onResizeEnd:S,onResizeStart:C,children:(0,v.jsx)(J.Uv,{resizingFallback:(0,v.jsx)(U.Z,{}),children:(0,v.jsx)("div",{className:"VisualizerLegends__container",children:(0,v.jsx)(D,{data:b,mode:null===f||void 0===f?void 0:f.mode})})})})}):null}Q.displayName="VisualizerLegends";var X=o.memo(Q)}}]);
//# sourceMappingURL=2587.b6f13f1e.chunk.js.map