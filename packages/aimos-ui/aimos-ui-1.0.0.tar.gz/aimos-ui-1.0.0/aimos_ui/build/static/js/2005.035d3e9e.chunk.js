"use strict";(self.webpackChunkui=self.webpackChunkui||[]).push([[2005],{72005:function(t,e,i){i.d(e,{Kj:function(){return K},r$:function(){return H},qF:function(){return E},ZR:function(){return L}});var n=i(72791),r=i(85531),s=i(37762),a=i(74165),h=i(15671),l=i(43144),u=Math.pow(2,-52),o=new Uint32Array(512),c=function(){function t(e){(0,h.Z)(this,t);var i=e.length>>1;if(i>0&&"number"!==typeof e[0])throw new Error("Expected coords to contain numbers.");this.coords=e;var n=Math.max(2*i-5,0);this._triangles=new Uint32Array(3*n),this._halfedges=new Int32Array(3*n),this._hashSize=Math.ceil(Math.sqrt(i)),this._hullPrev=new Uint32Array(i),this._hullNext=new Uint32Array(i),this._hullTri=new Uint32Array(i),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(i),this._dists=new Float64Array(i),this.update()}return(0,l.Z)(t,[{key:"update",value:function(){for(var t=this.coords,e=this._hullPrev,i=this._hullNext,n=this._hullTri,r=this._hullHash,s=t.length>>1,a=1/0,h=1/0,l=-1/0,o=-1/0,c=0;c<s;c++){var v=t[2*c],g=t[2*c+1];v<a&&(a=v),g<h&&(h=g),v>l&&(l=v),g>o&&(o=g),this._ids[c]=c}for(var x,m,k,p=(a+l)/2,b=(h+o)/2,w=1/0,M=0;M<s;M++){var T=f(p,b,t[2*M],t[2*M+1]);T<w&&(x=M,w=T)}var A=t[2*x],Z=t[2*x+1];w=1/0;for(var S=0;S<s;S++)if(S!==x){var P=f(A,Z,t[2*S],t[2*S+1]);P<w&&P>0&&(m=S,w=P)}for(var I=t[2*m],C=t[2*m+1],F=1/0,j=0;j<s;j++)if(j!==x&&j!==m){var z=_(A,Z,I,C,t[2*j],t[2*j+1]);z<F&&(k=j,F=z)}var U=t[2*k],L=t[2*k+1];if(F===1/0){for(var K=0;K<s;K++)this._dists[K]=t[2*K]-t[0]||t[2*K+1]-t[1];y(this._ids,this._dists,0,s-1);for(var E=new Uint32Array(s),H=0,q=0,N=-1/0;q<s;q++){var R=this._ids[q];this._dists[R]>N&&(E[H++]=R,N=this._dists[R])}return this.hull=E.subarray(0,H),this.triangles=new Uint32Array(0),void(this.halfedges=new Uint32Array(0))}if(d(A,Z,I,C,U,L)){var W=m,B=I,O=C;m=k,I=U,C=L,k=W,U=B,L=O}var $=function(t,e,i,n,r,s){var a=i-t,h=n-e,l=r-t,u=s-e,o=a*a+h*h,c=l*l+u*u,f=.5/(a*u-h*l),v=t+(u*o-h*c)*f,d=e+(a*c-l*o)*f;return{x:v,y:d}}(A,Z,I,C,U,L);this._cx=$.x,this._cy=$.y;for(var D=0;D<s;D++)this._dists[D]=f(t[2*D],t[2*D+1],$.x,$.y);y(this._ids,this._dists,0,s-1),this._hullStart=x;var G=3;i[x]=e[k]=m,i[m]=e[x]=k,i[k]=e[m]=x,n[x]=0,n[m]=1,n[k]=2,r.fill(-1),r[this._hashKey(A,Z)]=x,r[this._hashKey(I,C)]=m,r[this._hashKey(U,L)]=k,this.trianglesLen=0,this._addTriangle(x,m,k,-1,-1,-1);for(var J,Q,V=0;V<this._ids.length;V++){var X=this._ids[V],Y=t[2*X],tt=t[2*X+1];if(!(V>0&&Math.abs(Y-J)<=u&&Math.abs(tt-Q)<=u)&&(J=Y,Q=tt,X!==x&&X!==m&&X!==k)){for(var et=0,it=0,nt=this._hashKey(Y,tt);it<this._hashSize&&(-1===(et=r[(nt+it)%this._hashSize])||et===i[et]);it++);for(var rt=et=e[et],st=void 0;st=i[rt],!d(Y,tt,t[2*rt],t[2*rt+1],t[2*st],t[2*st+1]);)if((rt=st)===et){rt=-1;break}if(-1!==rt){var at=this._addTriangle(rt,X,i[rt],-1,-1,n[rt]);n[X]=this._legalize(at+2),n[rt]=at,G++;for(var ht=i[rt];st=i[ht],d(Y,tt,t[2*ht],t[2*ht+1],t[2*st],t[2*st+1]);)at=this._addTriangle(ht,X,st,n[X],-1,n[ht]),n[X]=this._legalize(at+2),i[ht]=ht,G--,ht=st;if(rt===et)for(;d(Y,tt,t[2*(st=e[rt])],t[2*st+1],t[2*rt],t[2*rt+1]);)at=this._addTriangle(st,X,rt,-1,n[rt],n[st]),this._legalize(at+2),n[st]=at,i[rt]=rt,G--,rt=st;this._hullStart=e[X]=rt,i[rt]=e[ht]=X,i[X]=ht,r[this._hashKey(Y,tt)]=X,r[this._hashKey(t[2*rt],t[2*rt+1])]=rt}}}this.hull=new Uint32Array(G);for(var lt=0,ut=this._hullStart;lt<G;lt++)this.hull[lt]=ut,ut=i[ut];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}},{key:"_hashKey",value:function(t,e){return Math.floor(function(t,e){var i=t/(Math.abs(t)+Math.abs(e));return(e>0?3-i:1+i)/4}(t-this._cx,e-this._cy)*this._hashSize)%this._hashSize}},{key:"_legalize",value:function(t){for(var e=this._triangles,i=this._halfedges,n=this.coords,r=0,s=0;;){var a=i[t],h=t-t%3;if(s=h+(t+2)%3,-1!==a){var l=a-a%3,u=h+(t+1)%3,c=l+(a+2)%3,f=e[s],v=e[t],d=e[u],_=e[c];if(g(n[2*f],n[2*f+1],n[2*v],n[2*v+1],n[2*d],n[2*d+1],n[2*_],n[2*_+1])){e[t]=_,e[a]=f;var y=i[c];if(-1===y){var x=this._hullStart;do{if(this._hullTri[x]===c){this._hullTri[x]=t;break}x=this._hullPrev[x]}while(x!==this._hullStart)}this._link(t,y),this._link(a,i[s]),this._link(s,c);var m=l+(a+1)%3;r<o.length&&(o[r++]=m)}else{if(0===r)break;t=o[--r]}}else{if(0===r)break;t=o[--r]}}return s}},{key:"_link",value:function(t,e){this._halfedges[t]=e,-1!==e&&(this._halfedges[e]=t)}},{key:"_addTriangle",value:function(t,e,i,n,r,s){var a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=e,this._triangles[a+2]=i,this._link(a,n),this._link(a+1,r),this._link(a+2,s),this.trianglesLen+=3,a}}],[{key:"from",value:function(e){for(var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:k,r=e.length,s=new Float64Array(2*r),a=0;a<r;a++){var h=e[a];s[2*a]=i(h),s[2*a+1]=n(h)}return new t(s)}}]),t}();function f(t,e,i,n){var r=t-i,s=e-n;return r*r+s*s}function v(t,e,i,n,r,s){var a=(n-e)*(r-t),h=(i-t)*(s-e);return Math.abs(a-h)>=33306690738754716e-32*Math.abs(a+h)?a-h:0}function d(t,e,i,n,r,s){return(v(r,s,t,e,i,n)||v(t,e,i,n,r,s)||v(i,n,r,s,t,e))<0}function g(t,e,i,n,r,s,a,h){var l=t-a,u=e-h,o=i-a,c=n-h,f=r-a,v=s-h,d=o*o+c*c,g=f*f+v*v;return l*(c*g-d*v)-u*(o*g-d*f)+(l*l+u*u)*(o*v-c*f)<0}function _(t,e,i,n,r,s){var a=i-t,h=n-e,l=r-t,u=s-e,o=a*a+h*h,c=l*l+u*u,f=.5/(a*u-h*l),v=(u*o-h*c)*f,d=(a*c-l*o)*f;return v*v+d*d}function y(t,e,i,n){if(n-i<=20)for(var r=i+1;r<=n;r++){for(var s=t[r],a=e[s],h=r-1;h>=i&&e[t[h]]>a;)t[h+1]=t[h--];t[h+1]=s}else{var l=i+1,u=n;x(t,i+n>>1,l),e[t[i]]>e[t[n]]&&x(t,i,n),e[t[l]]>e[t[n]]&&x(t,l,n),e[t[i]]>e[t[l]]&&x(t,i,l);for(var o=t[l],c=e[o];;){do{l++}while(e[t[l]]<c);do{u--}while(e[t[u]]>c);if(u<l)break;x(t,l,u)}t[i+1]=t[u],t[u]=o,n-l+1>=u-i?(y(t,e,l,n),y(t,e,i,u-1)):(y(t,e,i,u-1),y(t,e,l,n))}}function x(t,e,i){var n=t[e];t[e]=t[i],t[i]=n}function m(t){return t[0]}function k(t){return t[1]}var p=1e-6,b=function(){function t(){(0,h.Z)(this,t),this._x0=this._y0=this._x1=this._y1=null,this._=""}return(0,l.Z)(t,[{key:"moveTo",value:function(t,e){this._+="M".concat(this._x0=this._x1=+t,",").concat(this._y0=this._y1=+e)}},{key:"closePath",value:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}},{key:"lineTo",value:function(t,e){this._+="L".concat(this._x1=+t,",").concat(this._y1=+e)}},{key:"arc",value:function(t,e,i){var n=(t=+t)+(i=+i),r=e=+e;if(i<0)throw new Error("negative radius");null===this._x1?this._+="M".concat(n,",").concat(r):(Math.abs(this._x1-n)>p||Math.abs(this._y1-r)>p)&&(this._+="L"+n+","+r),i&&(this._+="A".concat(i,",").concat(i,",0,1,1,").concat(t-i,",").concat(e,"A").concat(i,",").concat(i,",0,1,1,").concat(this._x1=n,",").concat(this._y1=r))}},{key:"rect",value:function(t,e,i,n){this._+="M".concat(this._x0=this._x1=+t,",").concat(this._y0=this._y1=+e,"h").concat(+i,"v").concat(+n,"h").concat(-i,"Z")}},{key:"value",value:function(){return this._||null}}]),t}(),w=function(){function t(){(0,h.Z)(this,t),this._=[]}return(0,l.Z)(t,[{key:"moveTo",value:function(t,e){this._.push([t,e])}},{key:"closePath",value:function(){this._.push(this._[0].slice())}},{key:"lineTo",value:function(t,e){this._.push([t,e])}},{key:"value",value:function(){return this._.length?this._:null}}]),t}(),M=i(29439),T=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,960,500],n=(0,M.Z)(i,4),r=n[0],s=n[1],a=n[2],l=n[3];if((0,h.Z)(this,t),!((a=+a)>=(r=+r))||!((l=+l)>=(s=+s)))throw new Error("invalid bounds");this.delaunay=e,this._circumcenters=new Float64Array(2*e.points.length),this.vectors=new Float64Array(2*e.points.length),this.xmax=a,this.xmin=r,this.ymax=l,this.ymin=s,this._init()}return(0,l.Z)(t,[{key:"update",value:function(){return this.delaunay.update(),this._init(),this}},{key:"_init",value:function(){for(var t,e,i=this.delaunay,n=i.points,r=i.hull,s=i.triangles,a=this.vectors,h=this.circumcenters=this._circumcenters.subarray(0,s.length/3*2),l=0,u=0,o=s.length;l<o;l+=3,u+=2){var c=2*s[l],f=2*s[l+1],v=2*s[l+2],d=n[c],g=n[c+1],_=n[f],y=n[f+1],x=n[v],m=n[v+1],k=_-d,p=y-g,b=x-d,w=m-g,M=k*k+p*p,T=b*b+w*w,A=2*(k*w-p*b);if(A)if(Math.abs(A)<1e-8)t=(d+x)/2,e=(g+m)/2;else{var Z=1/A;t=d+(w*M-p*T)*Z,e=g+(k*T-b*M)*Z}else t=(d+x)/2-1e8*w,e=(g+m)/2+1e8*b;h[u]=t,h[u+1]=e}var S,P,I,C=r[r.length-1],F=4*C,j=n[2*C],z=n[2*C+1];a.fill(0);for(var U=0;U<r.length;++U)S=F,P=j,I=z,F=4*(C=r[U]),j=n[2*C],z=n[2*C+1],a[S+2]=a[F]=I-z,a[S+3]=a[F+1]=j-P}},{key:"render",value:function(t){var e=null==t?t=new b:void 0,i=this.delaunay,n=i.halfedges,r=i.inedges,s=i.hull,a=this.circumcenters,h=this.vectors;if(s.length<=1)return null;for(var l=0,u=n.length;l<u;++l){var o=n[l];if(!(o<l)){var c=2*Math.floor(l/3),f=2*Math.floor(o/3),v=a[c],d=a[c+1],g=a[f],_=a[f+1];this._renderSegment(v,d,g,_,t)}}for(var y,x=s[s.length-1],m=0;m<s.length;++m){y=x,x=s[m];var k=2*Math.floor(r[x]/3),p=a[k],w=a[k+1],M=4*y,T=this._project(p,w,h[M+2],h[M+3]);T&&this._renderSegment(p,w,T[0],T[1],t)}return e&&e.value()}},{key:"renderBounds",value:function(t){var e=null==t?t=new b:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),e&&e.value()}},{key:"renderCell",value:function(t,e){var i=null==e?e=new b:void 0,n=this._clip(t);if(null!==n&&n.length){e.moveTo(n[0],n[1]);for(var r=n.length;n[0]===n[r-2]&&n[1]===n[r-1]&&r>1;)r-=2;for(var s=2;s<r;s+=2)n[s]===n[s-2]&&n[s+1]===n[s-1]||e.lineTo(n[s],n[s+1]);return e.closePath(),i&&i.value()}}},{key:"cellPolygons",value:(0,a.Z)().mark((function t(){var e,i,n,r;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=this.delaunay.points,i=0,n=e.length/2;case 2:if(!(i<n)){t.next=11;break}if(!(r=this.cellPolygon(i))){t.next=8;break}return r.index=i,t.next=8,r;case 8:++i,t.next=2;break;case 11:case"end":return t.stop()}}),t,this)}))},{key:"cellPolygon",value:function(t){var e=new w;return this.renderCell(t,e),e.value()}},{key:"_renderSegment",value:function(t,e,i,n,r){var s,a=this._regioncode(t,e),h=this._regioncode(i,n);0===a&&0===h?(r.moveTo(t,e),r.lineTo(i,n)):(s=this._clipSegment(t,e,i,n,a,h))&&(r.moveTo(s[0],s[1]),r.lineTo(s[2],s[3]))}},{key:"contains",value:function(t,e,i){return(e=+e)===e&&(i=+i)===i&&this.delaunay._step(t,e,i)===t}},{key:"neighbors",value:(0,a.Z)().mark((function t(e){var i,n,r,h,l,u,o,c,f;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(i=this._clip(e))){t.next=33;break}n=(0,s.Z)(this.delaunay.neighbors(e)),t.prev=3,n.s();case 5:if((r=n.n()).done){t.next=25;break}if(h=r.value,!(l=this._clip(h))){t.next=23;break}u=0,o=i.length;case 10:if(!(u<o)){t.next=23;break}c=0,f=l.length;case 12:if(!(c<f)){t.next=20;break}if(i[u]!=l[c]||i[u+1]!=l[c+1]||i[(u+2)%o]!=l[(c+f-2)%f]||i[(u+3)%o]!=l[(c+f-1)%f]){t.next=17;break}return t.next=16,h;case 16:return t.abrupt("break",23);case 17:c+=2,t.next=12;break;case 20:u+=2,t.next=10;break;case 23:t.next=5;break;case 25:t.next=30;break;case 27:t.prev=27,t.t0=t.catch(3),n.e(t.t0);case 30:return t.prev=30,n.f(),t.finish(30);case 33:case"end":return t.stop()}}),t,this,[[3,27,30,33]])}))},{key:"_cell",value:function(t){var e=this.circumcenters,i=this.delaunay,n=i.inedges,r=i.halfedges,s=i.triangles,a=n[t];if(-1===a)return null;var h=[],l=a;do{var u=Math.floor(l/3);if(h.push(e[2*u],e[2*u+1]),s[l=l%3===2?l-2:l+1]!==t)break;l=r[l]}while(l!==a&&-1!==l);return h}},{key:"_clip",value:function(t){if(0===t&&1===this.delaunay.hull.length)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];var e=this._cell(t);if(null===e)return null;var i=this.vectors,n=4*t;return i[n]||i[n+1]?this._clipInfinite(t,e,i[n],i[n+1],i[n+2],i[n+3]):this._clipFinite(t,e)}},{key:"_clipFinite",value:function(t,e){for(var i,n,r,s,a,h=e.length,l=null,u=e[h-2],o=e[h-1],c=this._regioncode(u,o),f=0;f<h;f+=2)if(i=u,n=o,u=e[f],o=e[f+1],r=c,c=this._regioncode(u,o),0===r&&0===c)s=a,a=0,l?l.push(u,o):l=[u,o];else{var v=void 0,d=void 0,g=void 0,_=void 0,y=void 0;if(0===r){if(null===(v=this._clipSegment(i,n,u,o,r,c)))continue;var x=v,m=(0,M.Z)(x,4);d=m[0],g=m[1],_=m[2],y=m[3]}else{if(null===(v=this._clipSegment(u,o,i,n,c,r)))continue;var k=v,p=(0,M.Z)(k,4);_=p[0],y=p[1],d=p[2],g=p[3],s=a,a=this._edgecode(d,g),s&&a&&this._edge(t,s,a,l,l.length),l?l.push(d,g):l=[d,g]}s=a,a=this._edgecode(_,y),s&&a&&this._edge(t,s,a,l,l.length),l?l.push(_,y):l=[_,y]}if(l)s=a,a=this._edgecode(l[0],l[1]),s&&a&&this._edge(t,s,a,l,l.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return l}},{key:"_clipSegment",value:function(t,e,i,n,r,s){for(;;){if(0===r&&0===s)return[t,e,i,n];if(r&s)return null;var a=void 0,h=void 0,l=r||s;8&l?(a=t+(i-t)*(this.ymax-e)/(n-e),h=this.ymax):4&l?(a=t+(i-t)*(this.ymin-e)/(n-e),h=this.ymin):2&l?(h=e+(n-e)*(this.xmax-t)/(i-t),a=this.xmax):(h=e+(n-e)*(this.xmin-t)/(i-t),a=this.xmin),r?(t=a,e=h,r=this._regioncode(t,e)):(i=a,n=h,s=this._regioncode(i,n))}}},{key:"_clipInfinite",value:function(t,e,i,n,r,s){var a,h=Array.from(e);if((a=this._project(h[0],h[1],i,n))&&h.unshift(a[0],a[1]),(a=this._project(h[h.length-2],h[h.length-1],r,s))&&h.push(a[0],a[1]),h=this._clipFinite(t,h))for(var l,u=0,o=h.length,c=this._edgecode(h[o-2],h[o-1]);u<o;u+=2)l=c,c=this._edgecode(h[u],h[u+1]),l&&c&&(u=this._edge(t,l,c,h,u),o=h.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(h=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return h}},{key:"_edge",value:function(t,e,i,n,r){for(;e!==i;){var s=void 0,a=void 0;switch(e){case 5:e=4;continue;case 4:e=6,s=this.xmax,a=this.ymin;break;case 6:e=2;continue;case 2:e=10,s=this.xmax,a=this.ymax;break;case 10:e=8;continue;case 8:e=9,s=this.xmin,a=this.ymax;break;case 9:e=1;continue;case 1:e=5,s=this.xmin,a=this.ymin}n[r]===s&&n[r+1]===a||!this.contains(t,s,a)||(n.splice(r,0,s,a),r+=2)}if(n.length>4)for(var h=0;h<n.length;h+=2){var l=(h+2)%n.length,u=(h+4)%n.length;(n[h]===n[l]&&n[l]===n[u]||n[h+1]===n[l+1]&&n[l+1]===n[u+1])&&(n.splice(l,2),h-=2)}return r}},{key:"_project",value:function(t,e,i,n){var r,s,a,h=1/0;if(n<0){if(e<=this.ymin)return null;(r=(this.ymin-e)/n)<h&&(a=this.ymin,s=t+(h=r)*i)}else if(n>0){if(e>=this.ymax)return null;(r=(this.ymax-e)/n)<h&&(a=this.ymax,s=t+(h=r)*i)}if(i>0){if(t>=this.xmax)return null;(r=(this.xmax-t)/i)<h&&(s=this.xmax,a=e+(h=r)*n)}else if(i<0){if(t<=this.xmin)return null;(r=(this.xmin-t)/i)<h&&(s=this.xmin,a=e+(h=r)*n)}return[s,a]}},{key:"_edgecode",value:function(t,e){return(t===this.xmin?1:t===this.xmax?2:0)|(e===this.ymin?4:e===this.ymax?8:0)}},{key:"_regioncode",value:function(t,e){return(t<this.xmin?1:t>this.xmax?2:0)|(e<this.ymin?4:e>this.ymax?8:0)}}]),t}(),A=(0,a.Z)().mark(j),Z=2*Math.PI,S=Math.pow;function P(t){return t[0]}function I(t){return t[1]}function C(t,e,i){return[t+Math.sin(t+e)*i,e+Math.cos(t-e)*i]}var F=function(){function t(e){(0,h.Z)(this,t),this._delaunator=new c(e),this.inedges=new Int32Array(e.length/2),this._hullIndex=new Int32Array(e.length/2),this.points=this._delaunator.coords,this._init()}return(0,l.Z)(t,[{key:"update",value:function(){return this._delaunator.update(),this._init(),this}},{key:"_init",value:function(){var t=this._delaunator,e=this.points;if(t.hull&&t.hull.length>2&&function(t){for(var e=t.triangles,i=t.coords,n=0;n<e.length;n+=3){var r=2*e[n],s=2*e[n+1],a=2*e[n+2];if((i[a]-i[r])*(i[s+1]-i[r+1])-(i[s]-i[r])*(i[a+1]-i[r+1])>1e-10)return!1}return!0}(t)){this.collinear=Int32Array.from({length:e.length/2},(function(t,e){return e})).sort((function(t,i){return e[2*t]-e[2*i]||e[2*t+1]-e[2*i+1]}));for(var i=this.collinear[0],n=this.collinear[this.collinear.length-1],r=[e[2*i],e[2*i+1],e[2*n],e[2*n+1]],s=1e-8*Math.hypot(r[3]-r[1],r[2]-r[0]),a=0,h=e.length/2;a<h;++a){var l=C(e[2*a],e[2*a+1],s);e[2*a]=l[0],e[2*a+1]=l[1]}this._delaunator=new c(e)}else delete this.collinear;for(var u=this.halfedges=this._delaunator.halfedges,o=this.hull=this._delaunator.hull,f=this.triangles=this._delaunator.triangles,v=this.inedges.fill(-1),d=this._hullIndex.fill(-1),g=0,_=u.length;g<_;++g){var y=f[g%3===2?g-2:g+1];-1!==u[g]&&-1!==v[y]||(v[y]=g)}for(var x=0,m=o.length;x<m;++x)d[o[x]]=x;o.length<=2&&o.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=o[0],this.triangles[1]=o[1],this.triangles[2]=o[1],v[o[0]]=1,2===o.length&&(v[o[1]]=0))}},{key:"voronoi",value:function(t){return new T(this,t)}},{key:"neighbors",value:(0,a.Z)().mark((function t(e){var i,n,r,s,h,l,u,o,c,f,v;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=this.inedges,n=this.hull,r=this._hullIndex,s=this.halfedges,h=this.triangles,!(l=this.collinear)){t.next=10;break}if(!((u=l.indexOf(e))>0)){t.next=6;break}return t.next=6,l[u-1];case 6:if(!(u<l.length-1)){t.next=9;break}return t.next=9,l[u+1];case 9:return t.abrupt("return");case 10:if(-1!==(o=i[e])){t.next=13;break}return t.abrupt("return");case 13:c=o,f=-1;case 14:return t.next=16,f=h[c];case 16:if(h[c=c%3===2?c-2:c+1]===e){t.next=19;break}return t.abrupt("return");case 19:if(-1!==(c=s[c])){t.next=26;break}if((v=n[(r[e]+1)%n.length])===f){t.next=25;break}return t.next=25,v;case 25:return t.abrupt("return");case 26:if(c!==o){t.next=14;break}case 27:case"end":return t.stop()}}),t,this)}))},{key:"find",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if((t=+t)!==t||(e=+e)!==e)return-1;for(var n,r=i;(n=this._step(i,t,e))>=0&&n!==i&&n!==r;)i=n;return n}},{key:"_step",value:function(t,e,i){var n=this.inedges,r=this.hull,s=this._hullIndex,a=this.halfedges,h=this.triangles,l=this.points;if(-1===n[t]||!l.length)return(t+1)%(l.length>>1);var u=t,o=S(e-l[2*t],2)+S(i-l[2*t+1],2),c=n[t],f=c;do{var v=h[f],d=S(e-l[2*v],2)+S(i-l[2*v+1],2);if(d<o&&(o=d,u=v),h[f=f%3===2?f-2:f+1]!==t)break;if(-1===(f=a[f])){if((f=r[(s[t]+1)%r.length])!==v&&S(e-l[2*f],2)+S(i-l[2*f+1],2)<o)return f;break}}while(f!==c);return u}},{key:"render",value:function(t){for(var e=null==t?t=new b:void 0,i=this.points,n=this.halfedges,r=this.triangles,s=0,a=n.length;s<a;++s){var h=n[s];if(!(h<s)){var l=2*r[s],u=2*r[h];t.moveTo(i[l],i[l+1]),t.lineTo(i[u],i[u+1])}}return this.renderHull(t),e&&e.value()}},{key:"renderPoints",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,i=null==t?t=new b:void 0,n=this.points,r=0,s=n.length;r<s;r+=2){var a=n[r],h=n[r+1];t.moveTo(a+e,h),t.arc(a,h,e,0,Z)}return i&&i.value()}},{key:"renderHull",value:function(t){var e=null==t?t=new b:void 0,i=this.hull,n=this.points,r=2*i[0],s=i.length;t.moveTo(n[r],n[r+1]);for(var a=1;a<s;++a){var h=2*i[a];t.lineTo(n[h],n[h+1])}return t.closePath(),e&&e.value()}},{key:"hullPolygon",value:function(){var t=new w;return this.renderHull(t),t.value()}},{key:"renderTriangle",value:function(t,e){var i=null==e?e=new b:void 0,n=this.points,r=this.triangles,s=2*r[t*=3],a=2*r[t+1],h=2*r[t+2];return e.moveTo(n[s],n[s+1]),e.lineTo(n[a],n[a+1]),e.lineTo(n[h],n[h+1]),e.closePath(),i&&i.value()}},{key:"trianglePolygons",value:(0,a.Z)().mark((function t(){var e,i,n;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=this.triangles,i=0,n=e.length/3;case 2:if(!(i<n)){t.next=8;break}return t.next=5,this.trianglePolygon(i);case 5:++i,t.next=2;break;case 8:case"end":return t.stop()}}),t,this)}))},{key:"trianglePolygon",value:function(t){var e=new w;return this.renderTriangle(t,e),e.value()}}],[{key:"from",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:P,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:I,r=arguments.length>3?arguments[3]:void 0;return new t("length"in e?function(t,e,i,n){for(var r=t.length,s=new Float64Array(2*r),a=0;a<r;++a){var h=t[a];s[2*a]=e.call(n,h,a,t),s[2*a+1]=i.call(n,h,a,t)}return s}(e,i,n,r):Float64Array.from(j(e,i,n,r)))}}]),t}();function j(t,e,i,n){var r,h,l,u;return(0,a.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:r=0,h=(0,s.Z)(t),a.prev=2,h.s();case 4:if((l=h.n()).done){a.next=13;break}return u=l.value,a.next=8,e.call(n,u,r,t);case 8:return a.next=10,i.call(n,u,r,t);case 10:++r;case 11:a.next=4;break;case 13:a.next=18;break;case 15:a.prev=15,a.t0=a.catch(2),h.e(a.t0);case 18:return a.prev=18,h.f(),a.finish(18);case 21:case"end":return a.stop()}}),A,null,[[2,15,18,21]])}var z=i(80184);var U=function(t){return"function"==typeof t?t:function(e){return e[t]}},L=function(t){var e=t.points,i=t.x,r=t.y,s=t.width,a=t.height,h=t.debug,l=(0,n.useMemo)((function(){return function(t){var e=t.points,i=t.x,n=void 0===i?"x":i,r=t.y,s=void 0===r?"y":r,a=U(n),h=U(s);return e.map((function(t){return[a(t),h(t)]}))}({points:e,x:i,y:r})}),[e,i,r]);return(0,n.useMemo)((function(){return function(t){var e=t.points,i=t.width,n=t.height,r=t.debug,s=F.from(e),a=r?s.voronoi([0,0,i,n]):void 0;return{delaunay:s,voronoi:a}}({points:l,width:s,height:a,debug:h})}),[l,s,a,h])},K=function(t){var e=t.nodes,i=t.width,s=t.height,a=t.x,h=t.y,l=t.onMouseEnter,u=t.onMouseMove,o=t.onMouseLeave,c=t.onClick,f=t.debug,v=(0,n.useRef)(null),d=(0,n.useState)(null),g=d[0],_=d[1],y=L({points:e,x:a,y:h,width:i,height:s,debug:f}),x=y.delaunay,m=y.voronoi,k=(0,n.useMemo)((function(){if(f&&m)return m.render()}),[f,m]),p=(0,n.useCallback)((function(t){if(!v.current)return[null,null];var i=(0,r.P6)(v.current,t),n=i[0],s=i[1],a=x.find(n,s);return[a,void 0!==a?e[a]:null]}),[v,x]),b=(0,n.useCallback)((function(t){var e=p(t),i=e[0],n=e[1];_(i),n&&(null==l||l(n,t))}),[p,_,l]),w=(0,n.useCallback)((function(t){var e=p(t),i=e[0],n=e[1];_(i),n&&(null==u||u(n,t))}),[p,_,u]),M=(0,n.useCallback)((function(t){if(_(null),o){var i=void 0;null!==g&&(i=e[g]),i&&o(i,t)}}),[_,g,o,e]),T=(0,n.useCallback)((function(t){var e=p(t),i=e[0],n=e[1];_(i),n&&(null==c||c(n,t))}),[p,_,c]);return(0,z.jsxs)("g",{ref:v,children:[f&&m&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("path",{d:k,stroke:"red",strokeWidth:1,opacity:.75}),null!==g&&(0,z.jsx)("path",{fill:"pink",opacity:.35,d:m.renderCell(g)})]}),(0,z.jsx)("rect",{width:i,height:s,fill:"red",opacity:0,style:{cursor:"auto"},onMouseEnter:b,onMouseMove:w,onMouseLeave:M,onClick:T})]})},E=function(t,e){t.save(),t.globalAlpha=.75,t.beginPath(),e.render(t),t.strokeStyle="red",t.lineWidth=1,t.stroke(),t.restore()},H=function(t,e,i){t.save(),t.globalAlpha=.35,t.beginPath(),e.renderCell(i,t),t.fillStyle="red",t.fill(),t.restore()}}}]);
//# sourceMappingURL=2005.035d3e9e.chunk.js.map