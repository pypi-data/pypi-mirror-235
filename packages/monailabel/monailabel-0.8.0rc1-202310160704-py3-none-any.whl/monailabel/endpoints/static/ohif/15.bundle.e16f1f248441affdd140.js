(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{1257:function(e,t,n){},1294:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(1258),i=n(1),c=n.n(i),l=n(8),s=n.n(l),u=(n(1257),n(7)),d=n.n(u);function f(e,t){if(null!==e)return parseFloat(e).toFixed(t)}var p=n(21),m=n.n(p),y=n(22),v=n(99),b=n(92);function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function I(e,t){return!t||"object"!==h(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n  color: white;\n  padding: 2px 7px;\n  border-radius: 10px;\n  outline: 0;\n  text-transform: none;\n  margin: 2px 2px;\n  cursor: pointer;\n  &:disabled {\n    cursor: default;\n    opacity: 0.9;\n  }\n"]);return O=function(){return e},e}var x,D,P,k=o.a.button(O()),T=function(e){function t(){return g(this,t),I(this,E(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.imageId,n=e.scale,r=e.windowWidth,o=e.windowCenter,i=e.inconsistencyWarnings,c=e.SRLabels;if(!t)return null;var l,u=f(100*n,0),p=s.a.metaData.get("generalSeriesModule",t)||{},h=s.a.metaData.get("imagePlaneModule",t)||{},g=h.rows,w=h.columns,I=h.sliceThickness,E=h.sliceLocation,S=p.seriesNumber,O=p.seriesDescription,x=s.a.metaData.get("generalStudyModule",t)||{},D=x.studyDate,P=x.studyTime,T=x.studyDescription,R=s.a.metaData.get("patientModule",t)||{},j=R.patientId,C=R.patientName,F=(s.a.metaData.get("generalImageModule",t)||{}).instanceNumber,M=f(1e3/(s.a.metaData.get("cineModule",t)||{}).frameTime,1),A=function(e){var t=cornerstone.metaData.get("generalImageModule",e)||{},n=t.lossyImageCompression,r=t.lossyImageCompressionRatio,a=t.lossyImageCompressionMethod;return"01"===n&&""!==r?(a||"Lossy: ")+f(r,2)+" : 1":"Lossless / Uncompressed"}(t),L="W: ".concat(r.toFixed?r.toFixed(0):r," L: ").concat(r.toFixed?o.toFixed(0):o),U="".concat(w," x ").concat(g),_=this.props,N=_.imageIndex,B=_.stackSize,q=!(!i||0===i.length),Y=function(e){if(Array.isArray(e)){var t=e.map((function(e,t){return a.a.createElement("li",{key:t},e)}));return a.a.createElement("ol",null,t)}return a.a.createElement(a.a.Fragment,null,e)},V=!(!c||0===c.length),W=a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"top-left overlay-element"},a.a.createElement("div",null,function(e){if(e)return e.replace("^",", ").replace(/\^/g," ").trim()}(C)),a.a.createElement("div",null,j)),a.a.createElement("div",{className:"top-right overlay-element"},a.a.createElement("div",null,T),a.a.createElement("div",null,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"MMM D, YYYY";return d()(e,"YYYYMMDD").format(t)}(D)," ",function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"HH:mm:ss";return d()(e,"HH:mm:ss").format(t)}(P))),a.a.createElement("div",{className:"bottom-right overlay-element"},a.a.createElement("div",null,"Zoom: ",u,"%"),a.a.createElement("div",null,L),a.a.createElement("div",{className:"compressionIndicator"},A)),a.a.createElement("div",{className:"bottom-left2 warning"},a.a.createElement("div",null,q?function(e,t){return a.a.createElement(a.a.Fragment,null,0!=t.length?a.a.createElement(b.a,{key:e,placement:"left",overlay:a.a.createElement(v.a,{placement:"left",className:"in tooltip-warning",id:"tooltip-left"},a.a.createElement("div",{className:"warningTitle"},"Series Inconsistencies"),a.a.createElement("div",{className:"warningContent"},Y(t)))},a.a.createElement("div",{className:m()("warning")},a.a.createElement("span",{className:"warning-icon"},a.a.createElement(y.a,{name:"exclamation-triangle"})))):a.a.createElement(a.a.Fragment,null))}(S,i):"")),a.a.createElement("div",{className:"bottom-left3 warning"},a.a.createElement("div",null,V?function(e){return a.a.createElement(a.a.Fragment,null,0!=e.length?function(e){if(Array.isArray(e)){var t=e.map((function(e,t){var n=e.labels.color;return e.labels.visible&&a.a.createElement(b.a,{key:t,placement:"top",overlay:a.a.createElement(v.a,{placement:"top",className:"in tooltip-warning",id:"tooltip-top"},a.a.createElement("div",{className:"warningTitle"}," ","Coding scheme designators"," "),a.a.createElement("div",{className:"warningContent"},e.labels.labelCodingSchemeDesignator+" : "+e.labels.valueCodingSchemeDesignator))},a.a.createElement("div",{style:{display:"inline-block"}},a.a.createElement(k,{style:{backgroundColor:n},disabled:!0,key:t},e.labels.label+" : "+e.labels.value)))}));return a.a.createElement("ol",null,t)}return a.a.createElement(a.a.Fragment,null)}(e):a.a.createElement(a.a.Fragment,null))}(c):"")),a.a.createElement("div",{className:"bottom-left overlay-element"},a.a.createElement("div",null,S>=0?"Ser: ".concat(S):""),a.a.createElement("div",null,B>1?"Img: ".concat(F," ").concat(N,"/").concat(B):""),a.a.createElement("div",null,M>=0?"".concat(f(M,2)," FPS"):"",a.a.createElement("div",null,U),a.a.createElement("div",null,"number"!=typeof(l=E)||isNaN(l)?"":"Loc: ".concat(f(E,2)," mm "),I?"Thick: ".concat(f(I,2)," mm"):""),a.a.createElement("div",null,O))));return a.a.createElement("div",{className:"OHIFCornerstoneViewportOverlay"},W)}}])&&w(n.prototype,r),o&&w(n,o),t}(r.PureComponent);x=T,D="propTypes",P={scale:c.a.number.isRequired,windowWidth:c.a.oneOfType([c.a.number.isRequired,c.a.string.isRequired]),windowCenter:c.a.oneOfType([c.a.number.isRequired,c.a.string.isRequired]),imageId:c.a.string.isRequired,imageIndex:c.a.number.isRequired,stackSize:c.a.number.isRequired,inconsistencyWarnings:c.a.array,SRLabels:c.a.array},D in x?Object.defineProperty(x,D,{value:P,enumerable:!0,configurable:!0,writable:!0}):x[D]=P;var R=T,j=n(1260),C=n.n(j),F=n(17),M=n(71),A=n(170),L=n.n(A),U=n(70),_=n(4),N=n.n(_),B={DICOM_SR_DISPLAY_TOOL:"DICOMSRDisplayTool"},q="TEXT",Y="POINT",V="MULTIPOINT",W="POLYLINE",H="CIRCLE",z="ELLIPSE",J="POLYGON",Z=n(335);function X(e){return(X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function G(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function K(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $(e,t){return!t||"object"!==X(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ee(e){return(ee=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function te(e,t){return(te=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ne=Object(_.importInternal)("drawing/draw"),re=Object(_.importInternal)("drawing/drawJoinedLines"),ae=Object(_.importInternal)("drawing/drawCircle"),oe=Object(_.importInternal)("drawing/drawEllipse"),ie=Object(_.importInternal)("drawing/drawHandles"),ce=Object(_.importInternal)("drawing/drawArrow"),le=Object(_.importInternal)("drawing/getNewContext"),se=Object(_.importInternal)("base/BaseTool"),ue=Object(_.importInternal)("drawing/drawLinkedTextBox"),de=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};K(this,t);var r={mixins:["enabledOrDisabledBinaryTool"],name:B.DICOM_SR_DISPLAY_TOOL},a=Object.assign(r,n);return(e=$(this,ee(t).call(this,a)))._module=N.a.getModule(Z.a),e}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&te(e,t)}(t,e),n=t,(r=[{key:"renderToolData",value:function(e){var t=this,n=e.detail,r=n.element,a=this._module,o=Object(_.getToolState)(r,this.name);if(o)for(var i=a.getters.trackingUniqueIdentifiersForElement(r),c=i.activeIndex,l=i.trackingUniqueIdentifiers,s=l[c],u=o.data.filter((function(e){return l.includes(e.TrackingUniqueIdentifier)})),d=function(e){var r=u[e],a=r.renderableData,o=r.labels,i=r.TrackingUniqueIdentifier===s?_.toolColors.getActiveColor():_.toolColors.getToolColor(),c={color:i,lineWidth:2,handleRadius:6};Object.keys(a).forEach((function(e){var r=a[e];switch(e){case q:break;case Y:t.renderPoint(r,n,c);break;case V:t.renderMultipoint(r,n,c);break;case J:case W:t.renderPolyLine(r,n,c);break;case H:t.renderCircle(r,n,c);break;case z:t.renderEllipse(r,n,c)}}));var l=n.element,d=le(n.canvasContext.canvas);if(!r.handles||!r.handles.textBox){var f={active:!1,hasMoved:!0,movesIndependently:!1,drawnIndependently:!0,allowedOutsideImage:!0,hasBoundingBox:!0},p=function(e,t){var n=[];return Object.keys(e).forEach((function(r){var a=e[r];switch(r){case q:break;case Y:a.forEach((function(e){n=[].concat(G(n),G(e));var r=t.image,a=r.rows,o=r.columns/10,i=a/10,c=e[0];n.push({x:c.x+o,y:c.y+i})}));break;case V:case W:case J:a.forEach((function(e){n=[].concat(G(n),G(e))}));break;case H:a.forEach((function(e){var t=e.center,r=e.radius;n.push({x:t.x+r,y:t.y}),n.push({x:t.x-r,y:t.y}),n.push({x:t.x,y:t.y+r}),n.push({x:t.x,y:t.y-r})}));break;case z:a.forEach((function(e){var t=e.corner1,r=e.corner2,a=Math.abs(t.x-r.x)/2,o=Math.abs(t.y-r.y)/2,i={x:(t.x+r.x)/2,y:(t.y+r.y)/2};n.push({x:i.x+a,y:i.y}),n.push({x:i.x-a,y:i.y}),n.push({x:i.x,y:i.y+o}),n.push({x:i.x,y:i.y-o})}))}})),n}(a,n);f.anchorPoints=p;var m={x:Math.max.apply(Math,G(p.map((function(e){return e.x})))),y:Math.max.apply(Math,G(p.map((function(e){return e.y}))))};f.x=m.x,f.y=m.y,r.handles={},r.handles.textBox=f}var y=function(e){for(var t=Math.min(e.length,3),n=[],r=0;r<t;r++){var a=e[r];n.push("".concat(pe(a.label)).concat(a.value))}return n}(o);function v(){return r.handles.textBox.anchorPoints}0!==r.handles.textBox.anchorPoints.length&&ne(d,(function(e){ue(e,l,r.handles.textBox,y,r.handles,v,i,2,0,!0)}))},f=0;f<u.length;f++)d(f)}},{key:"renderPolyLine",value:function(e,t,n){var r=t.element,a=le(t.canvasContext.canvas);e.forEach((function(e){ne(a,(function(t){re(t,r,e[0],e,n)}))}))}},{key:"renderMultipoint",value:function(e,t,n){var r=le(t.canvasContext.canvas);e.forEach((function(e){ne(r,(function(r){ie(r,t,e,n)}))}))}},{key:"renderPoint",value:function(e,t,n){var r=t.element,a=t.image,o=a.rows,i=a.columns,c=le(t.canvasContext.canvas),l=n.color,u=n.lineWidth,d=i/10,f=o/10;e.forEach((function(e){var t=e[0];ne(c,(function(e){var n=s.a.pixelToCanvas(r,t),a=s.a.pixelToCanvas(r,{x:t.x+d,y:t.y+f});ce(e,a,n,l,u,!1)}))}))}},{key:"renderCircle",value:function(e,t,n){var r=t.element,a=le(t.canvasContext.canvas);e.forEach((function(e){var t=e.center,o=e.radius;ae(a,r,t,o,n)}))}},{key:"renderEllipse",value:function(e,t,n){var r=t.element,a=le(t.canvasContext.canvas);e.forEach((function(e){var t=e.corner1,o=e.corner2;oe(a,r,t,o,n,"pixel",0)}))}}])&&Q(n.prototype,r),a&&Q(n,a),t}(se);var fe={"Short Axis":"W ","Long Axis":"L ",AREA:"Area ",Length:"",CORNERSTONEFREETEXT:""};function pe(e){var t=fe[e];return void 0!==t?t:e}var me=function(e){var t=function(e){var t=e;switch(e){case"Length":t="SRLength";break;case"Bidirectional":t="SRBidirectional";break;case"ArrowAnnotate":t="SRArrowAnnotate";break;case"EllipticalRoi":t="SREllipticalRoi";break;case"FreehandRoi":t="SRFreehandRoi";break;case"RectangleRoi":t="SRRectangleRoi"}return t}("Wwwc");N.a.addToolForElement(e,de),N.a.setToolEnabledForElement(e,B.DICOM_SR_DISPLAY_TOOL),N.a.addToolForElement(e,N.a.LengthTool,{name:"SRLength",configuration:{renderDashed:!0}}),N.a.addToolForElement(e,N.a.ArrowAnnotateTool,{name:"SRArrowAnnotate",configuration:{renderDashed:!0}}),N.a.addToolForElement(e,N.a.BidirectionalTool,{name:"SRBidirectional",configuration:{renderDashed:!0}}),N.a.addToolForElement(e,N.a.EllipticalRoiTool,{name:"SREllipticalRoi",configuration:{renderDashed:!0}}),N.a.addToolForElement(e,N.a.RectangleRoiTool,{name:"SRRectangleRoi",configuration:{renderDashed:!0}}),N.a.addToolForElement(e,N.a.FreehandRoiTool,{name:"SRFreehandRoi",configuration:{renderDashed:!0}}),N.a.setToolActiveForElement(e,"PanMultiTouch",{pointers:2}),N.a.setToolActiveForElement(e,"ZoomTouchPinch",{}),N.a.setToolActiveForElement(e,t,{mouseButtonMask:1}),N.a.setToolActiveForElement(e,"Pan",{mouseButtonMask:4}),N.a.setToolActiveForElement(e,"Zoom",{mouseButtonMask:2}),N.a.setToolActiveForElement(e,"StackScrollMouseWheel",{})};function ye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ve(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var be=F.a.redux.actions,he=be.setViewportActive,ge=be.setViewportSpecificData,we=F.a.measurements.MeasurementHandlers,Ie=we.onAdded,Ee=we.onRemoved,Se=we.onModified,Oe={added:Ie,removed:Ee,modified:L()((function(e){return Se(e)}),300)},xe=Object(M.b)((function(e,t){var n;e.extensions&&e.extensions.cornerstone&&(n=e.extensions.cornerstone);var r=t.viewportIndex,a=r===e.viewports.activeViewportIndex,o=e.viewports.viewportSpecificData[r]||{},i=!1,c=24;if(o&&o.cine){var l=o.cine;i=!0===l.isPlaying,c=l.cineFrameRate||c}return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ye(n,!0).forEach((function(t){ve(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ye(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({isActive:a},n,{isStackPrefetchEnabled:t.hasOwnProperty("isStackPrefetchEnabled")?t.isStackPrefetchEnabled:t.stackPrefetch?t.stackPrefetch.enabled:a,isPlaying:i,frameRate:c})}),(function(e,t){var n=t.viewportIndex;return{setViewportActive:function(){e(he(n))},setViewportSpecificData:function(t){e(ge(n,t))},onElementEnabled:function(t){var r=t.detail.element;Object(U.b)(n,r),e(ge(n,{plugin:"cornerstone"})),me(r)},onMeasurementsChanged:function(e,t){return Oe[t](e)}}}))(C.a),De=F.a.utils.studyMetadataManager,Pe=function(e){var t=e.viewportIndex,n=e.displaySet,r=N.a.getModule(Z.a),a=Object(U.a)(t);if(a){var o=n.StudyInstanceUID,i=De.get(o);if(i){var c=i.getDisplaySets().filter((function(e){return"SR"===e.Modality}));if(0!==c.length){var l=c[0].measurements;if(l&&!(l.length<1)){var u=l.filter((function(e){return!0===e.loaded})),d=u[0];if(d){r.setters.trackingUniqueIdentifiersForElement(a,u.map((function(e){return e.TrackingUniqueIdentifier})),d);var f=d.TrackingUniqueIdentifier;r.setters.activeTrackingUniqueIdentifierForElement(a,f),s.a.updateImage(a)}}}}}};function ke(e){return(ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Te(){return(Te=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Re(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function je(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Re(o,r,a,i,c,"next",e)}function c(e){Re(o,r,a,i,c,"throw",e)}i(void 0)}))}}function Ce(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Fe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Me(e,t){return!t||"object"!==ke(t)&&"function"!=typeof t?Le(e):t}function Ae(e){return(Ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Le(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ue(e,t){return(Ue=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ne=F.a.utils.StackManager,Be=function(e){function t(){var e,n;Ce(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return _e(Le(n=Me(this,(e=Ae(t)).call.apply(e,[this].concat(a)))),"state",{viewportData:null}),_e(Le(n),"getViewportData",function(){var e=je(regeneratorRuntime.mark((function e(n,r,a,o,i){var c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=t.getCornerstoneStack(n,r,a,o,i),c={StudyInstanceUID:r,displaySetInstanceUID:a,stack:l},e.abrupt("return",c);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r,a,o){return e.apply(this,arguments)}}()),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ue(e,t)}(t,e),n=t,o=[{key:"init",value:function(){console.log("OHIFCornerstoneViewport init()")}},{key:"destroy",value:function(){console.log("OHIFCornerstoneViewport destroy()"),Ne.clearStacks()}},{key:"getCornerstoneStack",value:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(!e||!e.length)throw new Error("Studies not provided.");if(!t)throw new Error("StudyInstanceUID not provided.");if(!n)throw new Error("StudyInstanceUID not provided.");var o=e.find((function(e){return e.StudyInstanceUID===t}));if(!o)throw new Error("Study not found.");var i=o.displaySets.find((function(e){return e.displaySetInstanceUID===n}));if(!i)throw new Error("Display Set not found.");var c=Ne.findOrCreateStack(o,i),l=Object.assign({},c);if(l.currentImageIdIndex=a,r){var u=l.imageIds.findIndex((function(e){return s.a.metaData.get("SOPInstanceUID",e)===r}));u>-1?l.currentImageIdIndex=u:console.warn("SOPInstanceUID provided was not found in specified DisplaySet")}return l}}],(r=[{key:"setStateFromProps",value:function(){var e=this,t=this.props.viewportData,n=t.studies,r=t.displaySet,a=r.StudyInstanceUID,o=r.displaySetInstanceUID,i=r.sopClassUIDs,c=r.SOPInstanceUID,l=r.frameIndex;a&&o&&(i&&i.length>1&&console.warn("More than one SOPClassUID in the same series is not yet supported."),this.getViewportData(n,a,o,c,l).then((function(t){e.setState({viewportData:t})})))}},{key:"componentDidMount",value:function(){this.setStateFromProps()}},{key:"componentDidUpdate",value:function(e){var t=this.props.viewportData.displaySet,n=e.viewportData.displaySet;if(t.displaySetInstanceUID!==n.displaySetInstanceUID||t.SOPInstanceUID!==n.SOPInstanceUID||t.frameIndex!==n.frameIndex){var r=this.props.viewportIndex;Pe({displaySet:t,viewportIndex:r}),this.setStateFromProps()}}},{key:"render",value:function(){var e=this,t=null;if(!this.state.viewportData)return null;var n=this.props.viewportIndex,r=this.props.viewportData.displaySet.inconsistencyWarnings,o=this.state.viewportData.stack,i=o.imageIds,c=o.currentImageIdIndex;return this.props.children&&this.props.children.length&&(t=this.props.children.map((function(t,n){return t&&a.a.cloneElement(t,{viewportIndex:e.props.viewportIndex,key:n})}))),a.a.createElement(a.a.Fragment,null,a.a.createElement(xe,Te({viewportIndex:n,imageIds:i,imageIdIndex:c,onNewImageDebounced:function(t){var r=t.currentImageIdIndex,a=t.sopInstanceUid,o=e.props.viewportData.displaySet.StudyInstanceUID;r>=0&&e.props.onNewImage({StudyInstanceUID:o,SOPInstanceUID:a,frameIndex:r,activeViewportIndex:n})},onNewImageDebounceTime:300,viewportOverlayComponent:function(t){var n,o=e.props.viewportData.displaySet;return o.SRLabels&&0!==o.SRLabels.length&&(n=o.SRLabels.filter((function(e){return e.ReferencedSOPInstanceUID===o.SOPInstanceUID}))),a.a.createElement(R,Te({},t,{inconsistencyWarnings:r,SRLabels:n}))},stackPrefetch:this.props.stackPrefetch,isStackPrefetchEnabled:this.props.isStackPrefetchEnabled},this.props.customProps)),t)}}])&&Fe(n.prototype,r),o&&Fe(n,o),t}(r.Component);_e(Be,"defaultProps",{customProps:{},isStackPrefetchEnabled:!0}),_e(Be,"propTypes",{studies:c.a.object,displaySet:c.a.object,viewportIndex:c.a.number,children:c.a.node,customProps:c.a.object,stackPrefetch:c.a.object,isStackPrefetchEnabled:c.a.bool}),_e(Be,"id","OHIFCornerstoneViewport");t.default=Be}}]);