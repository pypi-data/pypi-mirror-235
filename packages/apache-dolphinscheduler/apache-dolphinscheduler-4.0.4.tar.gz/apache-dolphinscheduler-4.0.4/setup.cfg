[metadata]
name = apache-dolphinscheduler
version = attr: pydolphinscheduler.__version__
url = https://dolphinscheduler.apache.org/python/main/index.html
description = pydolphinscheduler is Apache DolphinScheduler Python API.
long_description = file: README.md
long_description_content_type = text/markdown
author = Apache Software Foundation
author_email = dev@dolphinscheduler.apache.org
license = Apache License 2.0
license_files = 
	file: LICENSE
keywords = 
	dolphinscheduler
	workflow
	scheduler
	taskflow
classifiers = 
	Development Status :: 4 - Beta
	Environment :: Console
	Intended Audience :: Developers
	License :: OSI Approved :: Apache Software License
	Operating System :: Unix
	Operating System :: POSIX
	Operating System :: Microsoft :: Windows
	Programming Language :: Python
	Programming Language :: Python :: 3
	Programming Language :: Python :: 3.6
	Programming Language :: Python :: 3.7
	Programming Language :: Python :: 3.8
	Programming Language :: Python :: 3.9
	Programming Language :: Python :: 3.10
	Programming Language :: Python :: 3.11
	Programming Language :: Python :: Implementation :: CPython
	Programming Language :: Python :: Implementation :: PyPy
	Topic :: Software Development :: User Interfaces
project_urls = 
	Homepage = https://dolphinscheduler.apache.org/python/main/index.html
	Documentation = https://dolphinscheduler.apache.org/python/main/index.html
	Source = https://github.com/apache/dolphinscheduler-sdk-python
	Issue Tracker = https://github.com/apache/dolphinscheduler-sdk-python/issues
	Twitter = https://twitter.com/dolphinschedule

[options]
python_requires = >=3.6
include_package_data = True
zip_safe = true
platforms = any
package_dir = 
	=src
packages = 
	find:
install_requires = 
	boto3>=1.23.10
	oss2>=2.16.0
	python-gitlab>=2.10.1
	click>=8.0.0
	py4j~=0.10
	ruamel.yaml
	stmdency>=0.0.2
	packaging>=21.3

[options.packages.find]
where = src

[options.package_data]
pydolphinscheduler = 
	default_config.yaml
	version_ext

[options.entry_points]
console_scripts = 
	pydolphinscheduler = pydolphinscheduler.cli.commands:cli

[options.extras_require]
build = 
	build
	setuptools>=42
	wheel
test = 
	pytest>=6.2
	freezegun>=1.1
	coverage>=6.1
	pytest-cov>=3.0
	docker>=5.0.3
style = 
	flake8>=4.0
	flake8-docstrings>=1.6
	flake8-black>=0.2
	isort>=5.10
	autoflake>=1.4
doc = 
	sphinx>=4.3
	sphinx_rtd_theme>=1.0
	sphinx-click>=3.0
	sphinx-inline-tabs
	sphinx-copybutton>=0.4.0
	sphinx-github-changelog
dev = 
	apache-dolphinscheduler[build]
	apache-dolphinscheduler[test]
	apache-dolphinscheduler[style]
	apache-dolphinscheduler[doc]

[tool:pytest]
norecursedirs = 
	tests/testing
	tests/integration

[coverage:run]
command_line = -m pytest
omit = 
	tests/*
	*/pydolphinscheduler/examples/*
	*/pydolphinscheduler/java_gateway.py

[coverage:report]
skip_covered = True
show_missing = True
precision = 2
fail_under = 90

[flake8]
max-line-length = 110
exclude = 
	.git,
	__pycache__,
	.pytest_cache,
	*.egg-info,
	docs/source/conf.py
	old,
	build,
	dist,
	htmlcov,
	.tox,
ignore = 
	D107,
	D105,
	W503
per-file-ignores = 
	*/pydolphinscheduler/side/__init__.py:F401
	*/pydolphinscheduler/tasks/__init__.py:F401

[isort]
profile = black

[tox:tox]
envlist = 
	local-ci
	auto-lint
	lint
	doc-build
	doc-build-multi
	code-test
	integrate-test
	local-integrate-test
	py{36,37,38,39,310,311}

[testenv]
allowlist_externals = 
	make
	git
	find

[testenv:auto-lint]
extras = style
commands = 
	python -m isort .
	python -m black .
	python -m autoflake --in-place --remove-all-unused-imports --ignore-init-module-imports --recursive .

[testenv:lint]
extras = style
commands = 
	python -m isort --check .
	python -m black --check .
	python -m flake8
	python -m autoflake --remove-all-unused-imports --ignore-init-module-imports --check --recursive .

[testenv:code-test]
extras = test
commands = 
	python -m pytest --cov=pydolphinscheduler --cov-report term --cov-report xml:coverage.xml tests/

[testenv:doc-build]
extras = doc
commands = 
	make -C {toxinidir}/docs clean
	make -C {toxinidir}/docs html
commands_post = 
	find {toxinidir}/docs -type f -name "environment.pickle" -exec rm -rf \{\} \;

[testenv:doc-build-multi]
extras = doc
commands = 
	git fetch --tags
	make -C {toxinidir}/docs clean
	make -C {toxinidir}/docs multiversion
commands_post = 
	find {toxinidir}/docs -type f -name "environment.pickle" -exec rm -rf \{\} \;

[testenv:integrate-test]
extras = test
commands = 
	python -m pytest tests/integration/

[testenv:local-integrate-test]
extras = test
setenv = 
	skip_launch_docker = true
commands = 
	{[testenv:integrate-test]commands}

[testenv:local-ci]
extras = dev
commands = 
	{[testenv:lint]commands}
	{[testenv:code-test]commands}
	{[testenv:doc-build]commands}

[egg_info]
tag_build = 
tag_date = 0

