"use strict";(self.webpackChunkui=self.webpackChunkui||[]).push([[7336],{72884:function(e,t,n){n.r(t),n.d(t,{default:function(){return V}});var o=n(1413),r=n(72791),i=n(57678),a=n(32125),s=n(87314),c=n(17539),u=n(19741),l=n(47956),d=(0,l.zo)(s.kz,{$$space:"$space$15",py:"$13",height:"calc(100vh - $$space)",overflowY:"auto",overflow:"auto",display:"flex",fd:"column"}),v=(0,l.zo)(i.xu,{gap:"$13",display:"flex",ai:"center",fw:"wrap",mt:"$9"}),h=((0,l.zo)(u.OL,{display:"flex",textDecoration:"none"}),n(57618)),p=n(43403),f=n(16551),g=n(67571),x=n(81694),m=n.n(x);var b=function(e,t){var n=null===e||void 0===e?void 0:e.substring(1).split("");3===n.length&&(n=[n[0],n[0],n[1],n[1],n[2],n[2]]);var o=+("0x"+n.join(""));return"rgba(".concat([o>>16&255,o>>8&255,255&o].join(","),",").concat(t||1,")")},j=n(80184);function C(e){var t=e.label,n=e.badge,o=void 0===n?{value:""}:n,i=e.count,a=e.icon,s=e.iconBgColor,c=void 0===s?"#000000":s,u=e.cardBgColor,l=void 0===u?b(c,.1):u,d=e.onMouseOver,v=e.onMouseLeave,h=e.navLink,p=e.highlighted,x=e.outlined,C=void 0!==x&&x,S=e.isLoading,k=void 0!==S&&S,y=(0,g.k6)(),_=r.useCallback((function(e){"function"===typeof d&&d(e,"card")}),[d]),M={card:{borderColor:C?c:"transparent",backgroundColor:p?c:l},iconWrapper:{backgroundColor:p?"#fff":c},iconColor:p?c:"#fff",label:p?{color:"#fff"}:{},count:p?{color:"#fff"}:{}};return(0,j.jsxs)("div",{onClick:function(){return h&&y.push(h)},onMouseLeave:v,onMouseOver:function(){return _(t)},className:m()("StatisticsCard",{highlighted:p}),style:M.card,children:[(null===o||void 0===o?void 0:o.value)&&(0,j.jsx)(f.xv,{component:"p",className:"StatisticsCard__badge",weight:600,size:8,style:o.style,children:o.value}),a&&(0,j.jsx)("div",{className:"StatisticsCard__iconWrapper",style:M.iconWrapper,children:(0,j.jsx)(f.JO,{name:a,color:M.iconColor})}),(0,j.jsxs)("div",{className:"StatisticsCard__info",children:[(0,j.jsx)(f.xv,{className:"StatisticsCard__info__label",size:10,weight:600,style:M.label,children:t}),(0,j.jsx)(f.xv,{className:"StatisticsCard__info__count",size:16,weight:600,style:M.count,children:(0,j.jsx)("span",{children:k?"--":i})})]})]})}C.displayName="StatisticsCard";var S=r.memo(C),k=n(75566);function y(e){var t=e.data,n=void 0===t?[]:t,i=e.width,a=void 0===i?"100%":i,s=e.height,c=void 0===s?8:s,u=e.onMouseOver,l=e.onMouseLeave,d=r.useCallback((function(e){"function"===typeof u&&u(e,"bar")}),[u]),v=r.useMemo((function(){for(var e=[],t=0;t<n.length;t++){var o,r,i=n[t],a=(null===(o=e[t-1])||void 0===o?void 0:o.left)||0,s=(null===(r=n[t-1])||void 0===r?void 0:r.percent)||0,c={width:"".concat(i.percent.toFixed(2),"%"),left:0===t?0:a+s,backgroundColor:i.color};e.push(c)}return e}),[n]);return(0,j.jsx)("div",{className:"StatisticsBar",style:{width:a,height:c},children:Object.values(n).map((function(e,t){var n=e.percent,r=e.color,i=e.label,a=void 0===i?"":i,s=e.highlighted;return n?(0,j.jsx)(k.ZP,{title:a,children:(0,j.jsx)("div",{className:m()("StatisticsBar__item",{highlighted:s}),style:(0,o.Z)((0,o.Z)({},v[t]),{},{left:v[t].left+"%"}),onMouseLeave:l,onMouseOver:function(){return d(a)}})},"".concat(a,"-").concat(r)):null}))})}y.displayName="StatisticsBar";var _=r.memo(y);function M(){var e=F(),t=e.projectParamsStore,n=e.projectContributionsStore,o=e.statisticsBarData,r=e.runsCountingMap,i=e.hoveredState,a=e.totalRunsCount,s=e.statisticsMap,c=e.onMouseOver,u=e.onMouseLeave;return(0,j.jsxs)("div",{className:"ProjectStatistics",children:[(0,j.jsxs)(f.xv,{className:"ProjectStatistics__totalRuns",component:"p",tint:100,weight:700,size:14,children:["Total runs: ",a]}),(0,j.jsx)("div",{className:"ProjectStatistics__cards",children:Object.values(r).map((function(e){var t=e.label,o=e.icon,r=e.count,a=e.iconBgColor,s=e.navLink;return(0,j.jsx)(S,{label:t,icon:o,count:r,navLink:s,iconBgColor:a,onMouseOver:c,onMouseLeave:u,highlighted:!!s&&i.id===t,isLoading:n.loading},t)}))}),(0,j.jsx)(f.xv,{className:"ProjectStatistics__trackedSequences",component:"p",tint:100,weight:700,size:14,children:"Tracked sequences"}),(0,j.jsx)("div",{className:"ProjectStatistics__cards",children:Object.values(s).map((function(e){var n=e.label,o=e.icon,r=e.count,a=e.iconBgColor,s=e.navLink,l=e.badge;return(0,j.jsx)(S,{badge:l,label:n,icon:o,count:r,navLink:s,iconBgColor:a,onMouseOver:c,onMouseLeave:u,highlighted:!!s&&"card"===i.source&&i.id===n,outlined:i.id===n,isLoading:t.loading},n)}))}),(0,j.jsx)("div",{className:"ProjectStatistics__bar",children:(0,j.jsx)(_,{data:o,onMouseOver:c,onMouseLeave:u})})]})}M.displayName="ProjectStatistics";var Z=n(29439),L=n(4942),w=n(19010),E=n(48048),O=n(71744),P=n(38009),$=n(74165),N=n(15861),B=n(82737),R={data:null,loading:!0,error:null};var z=function(e){var t=(0,B.ZP)((function(){return R}));function n(){return(n=(0,N.Z)((0,$.Z)().mark((function n(o){var r;return(0,$.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.setState({loading:!0}),n.next=3,e(o);case 3:r=n.sent,t.setState({data:r,loading:!1});case 5:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return{fetchData:function(e){return n.apply(this,arguments)},state:t,destroy:function(){t.destroy(),t.setState(R,!0)}}};var T=function(){var e=z(P.nA);return{fetchProjectContributions:e.fetchData,projectContributionsState:e.state,destroy:e.destroy}}();var D,A=function(){var e=z((0,N.Z)((0,$.Z)().mark((function e(){var t;return(0,$.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,P.Sv)({sequence:[E.uS.Metric,E.uS.Image,E.uS.Figure,E.uS.Text,E.uS.Audio,E.uS.Distribution],params:!1});case 2:return t=e.sent,e.abrupt("return",t.sequences);case 4:case"end":return e.stop()}}),e)}))));return{fetchProjectParams:e.fetchData,projectParamsState:e.state,destroy:e.destroy}}(),I=(D={},(0,L.Z)(D,E.uS.Metric,{label:"Metrics",count:0,icon:"metrics",iconBgColor:"#7A4CE0",navLink:w.ZP.METRICS_EXPLORER.path}),(0,L.Z)(D,E.uS.Figure,{label:"Figures",icon:"figures",count:0,iconBgColor:"#18AB6D",navLink:w.ZP.FIGURES_EXPLORER.path}),(0,L.Z)(D,E.uS.Image,{label:"Images",icon:"images",count:0,iconBgColor:"#F17922",navLink:w.ZP.IMAGES_EXPLORER.path}),(0,L.Z)(D,E.uS.Audio,{label:"Audios",icon:"audios",count:0,iconBgColor:"#FCB500",navLink:w.ZP.AUDIOS_EXPLORER.path,badge:{value:"New",style:{backgroundColor:"#1473e6",color:"#fff"}}}),(0,L.Z)(D,E.uS.Text,{label:"Texts",icon:"text",count:0,iconBgColor:"#E149A0",navLink:w.ZP.TEXT_EXPLORER.path,badge:{value:"New",style:{backgroundColor:"#1473e6",color:"#fff"}}}),(0,L.Z)(D,E.uS.Distribution,{label:"Distributions",icon:"distributions",count:0,iconBgColor:"#0394B4",navLink:"",badge:{value:"Explorer coming soon"}}),D),q={runs:{label:"runs",icon:"runs",count:0,iconBgColor:"#1473E6"},archived:{label:"archived",icon:"archive",count:0,iconBgColor:"#606986",navLink:"/runs?select=".concat((0,O.cv)({query:"run.archived == True"}))}};var F=function(){var e=r.useState({source:"",id:""}),t=(0,Z.Z)(e,2),n=t[0],i=t[1],a=r.useRef(A).current,s=a.projectParamsState((function(e){return e})),c=r.useRef(T).current.projectContributionsState((function(e){return e}));r.useEffect((function(){s.data||a.fetchProjectParams()}),[a]);var u=r.useMemo((function(){for(var e=(0,o.Z)({},I),t=0,n=0,r=Object.entries(s.data||{});n<r.length;n++){for(var i=(0,Z.Z)(r[n],2),a=i[0],c=i[1],u=0,l=0,d=0,v=Object.entries(c);d<v.length;d++){var h=(0,Z.Z)(v[d],2),p=h[0],f=h[1];p.startsWith("__system__")?u+=f.length:l+=f.length}t+=l,e[a].count=l,u&&(t+=u,e.systemMetrics.count=u)}return{statisticsMap:e,totalTrackedSequencesCount:t}}),[s]),l=u.statisticsMap,d=u.totalTrackedSequencesCount,v=r.useMemo((function(){var e,t;return{totalRunsCount:(null===(e=c.data)||void 0===e?void 0:e.num_runs)||0,archivedRuns:(null===(t=c.data)||void 0===t?void 0:t.num_archived_runs)||0}}),[c]),h=v.totalRunsCount,p=v.archivedRuns,f=r.useMemo((function(){return Object.values(l).map((function(e){var t=e.label,o=e.iconBgColor,r=void 0===o?"#000":o,i=e.count;return{highlighted:n.id===t,label:t,color:r,percent:0===d?0:i/d*100}}))}),[l,d,n]),g=r.useMemo((function(){return{runs:(0,o.Z)((0,o.Z)({},q.runs),{},{count:h-p}),archived:(0,o.Z)((0,o.Z)({},q.archived),{},{count:p})}}),[p,h]),x=r.useCallback((function(){i({source:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",id:arguments.length>0&&void 0!==arguments[0]?arguments[0]:""})}),[]),m=r.useCallback((function(){i({source:"",id:""})}),[]);return{projectParamsStore:s,projectContributionsStore:c,statisticsBarData:f,runsCountingMap:g,totalRunsCount:h,hoveredState:n,statisticsMap:l,onMouseOver:x,onMouseLeave:m}},W=n(49379);var X=(0,l.zo)(u.OL,{width:"426px",minWidth:"426px",height:"118px",borderRadius:3,p:"$13 $13 0",textDecoration:"none",position:"relative",transition:"all 0.18s ease-out","&:hover":{".card-title":{textDecoration:"underline"}}}),G=(0,l.zo)(i.xv,{position:"absolute",top:"-$5",right:"-$4",textAlign:"center",whiteSpace:"nowrap",padding:"$1 $3",br:"3px",backgroundColor:"white",bs:"inset 0 1px 2px 0 #00000029",userSelect:"none"});function U(e){var t=e.displayName,n=e.icon,o=e.count,r=e.color,a=e.description,s=e.path,c=e.status,u=e.isLoading;return(0,j.jsxs)(X,{to:s,css:{backgroundColor:"".concat(b(r,.1)),"&:hover":{bs:"0 0 0 1px inset ".concat(r)}},children:[c&&(0,j.jsx)(G,{css:c===w.Tt.NEW?{backgroundColor:"$primary100",color:"#fff"}:{},weight:"$3",size:"8px",children:c===w.Tt.COMING_SOON?"Explorer coming soon":"New"}),(0,j.jsxs)(i.xu,{display:"flex",ai:"center",mb:"$5",children:[n&&(0,j.jsx)(i.xu,{display:"flex",ai:"center",jc:"center",css:{size:"$7",br:"$pill",background:"".concat(r)},children:(0,j.jsx)(f.JO,{color:"white",name:n})}),(0,j.jsxs)(i.xv,{className:"card-title",css:{ml:"$5"},size:"$6",weight:"$3",children:[t," ",u?null:o?"(".concat(o,")"):null]})]}),(0,j.jsx)(i.xv,{as:"p",children:a||""})]})}var J=r.memo(U);var V=function(){var e=function(){var e=F(),t=e.statisticsMap,n=e.projectParamsStore;return r.useEffect((function(){W.t(p.q.explorers.pageView)}),[]),{explorers:r.useMemo((function(){var e={},n={};return Object.keys(w.rn).forEach((function(r){var i,a=w.rn[r],s=(null===(i=Object.values(t).find((function(e){return e.navLink===a.path})))||void 0===i?void 0:i.count)||0;a.category===h.r.Trainings&&(e[r]=(0,o.Z)((0,o.Z)({},a),{},{count:s})),a.category===h.r.Prompts&&(n[r]=(0,o.Z)((0,o.Z)({},a),{},{count:s}))})),{trainingsExplorers:e,promptExplorers:n}}),[t]),isLoading:n.loading}}(),t=e.explorers,n=e.isLoading;function u(e){var t,n=null!==(t=(0,c.rV)("".concat(e.split("/")[2],"Url")))&&void 0!==t?t:"";return""!==n&&n.startsWith(e)?n:e}return(0,j.jsxs)(i.xu,{display:"flex",fd:"column",children:[(0,j.jsx)(s.Du,{jc:"space-between",children:(0,j.jsx)(a.ZP,{})}),(0,j.jsx)(d,{children:(0,j.jsxs)(i.xu,{display:"flex",fd:"column",children:[(0,j.jsxs)(i.xu,{children:[(0,j.jsx)(i.xv,{css:{mb:"$5"},weight:"$3",as:"h3",size:"$6",children:"Explore Executions of AI Systems"}),(0,j.jsx)(v,{children:Object.values(t.promptExplorers).map((function(e,t){return(0,r.createElement)(J,(0,o.Z)((0,o.Z)({},e),{},{isLoading:n,path:u(e.path),key:t}))}))})]}),(0,j.jsxs)(i.xu,{mt:"$17",children:[(0,j.jsx)(i.xv,{css:{mb:"$5"},weight:"$3",as:"h3",size:"$6",children:"Explore Training Runs"}),(0,j.jsx)(v,{children:Object.values(t.trainingsExplorers).map((function(e,t){return(0,r.createElement)(J,(0,o.Z)((0,o.Z)({},e),{},{isLoading:n,path:u(e.path),key:t}))}))})]})]})})]})}}}]);
//# sourceMappingURL=Explorers.c35fbf01.chunk.js.map